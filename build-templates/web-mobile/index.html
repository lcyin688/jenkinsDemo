<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <title>Hi Win</title>

  <!--http://www.html5rocks.com/en/mobile/mobifying/-->
  <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1"/>

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="theme-color" content="#000000" />
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit"/>
  <meta name="force-rendering" content="webkit"/>
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes"/>
  <meta name="x5-fullscreen" content="true"/>
  <meta name="360-fullscreen" content="true"/>
  
  <!-- force screen orientation on some browser -->
  <meta name="screen-orientation" content="landscape"/>
  <meta name="x5-orientation" content="landscape">

  <!--fix fireball/issues/3568 -->
  <!--<meta name="browsermode" content="application">-->
  <meta name="x5-page-mode" content="app">
  
  <!--<link rel="apple-touch-icon" href=".png" />-->
  <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->
  <link rel="apple-touch-icon" sizes="57x57" href="icon/hiwin/icon-57.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="icon/hiwin/icon-72.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="icon/hiwin/icon-60@2x.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="icon/hiwin/icon-72@2x.png" />

  <link rel="stylesheet" type="text/css" href="style-mobile.css"/>
  <link rel="icon" href="icon/hiwin/favicon.ico"/>
  <link rel="manifest" href="manifest.json" />

  <!-- Adjust Web Code Start -->
  <script>
    !function (t, e, a, r, n, s, d, l, o, i, u) {
      t.Adjust = t.Adjust || {}, t.Adjust_q = t.Adjust_q || []; for (var c = 0; c < l.length; c++)o(t.Adjust, t.Adjust_q, l[c]); i = e.createElement(a), u = e.getElementsByTagName(a)[0], i.async = !0, i.src = "https://cdn.adjust.com/adjust-latest.min.js", i.onload = function () { for (vare = 0; e < t.Adjust_q.length; e++)t.Adjust[t.Adjust_q[e][0]].apply(t.Adjust, t.Adjust_q[e][1]); t.Adjust_q = [] }, u.parentNode.insertBefore(i, u)
    }(window, document, "script", 0, 0, 0, 0, ["initSdk", "getAttribution", "getWebUUID", "setReferrer", "trackEvent", "addGlobalCallbackParameters", "addGlobalPartnerParameters", "removeGlobalCallbackParameter", "removeGlobalPartnerParameter", "clearGlobalCallbackParameters", "clearGlobalPartnerParameters", "switchToOfflineMode", "switchBackToOnlineMode", "stop", "restart", "gdprForgetMe", "disableThirdPartySharing", "initSmartBanner", "showSmartBanner", "hideSmartBanner"], (function (t, e, a) { t[a] = function () { e.push([a, arguments]) } }));
  </script>
  <!-- Adjust Web Code End -->

  <!-- Meta Pixel Code Start -->
  <script>
    var fbpxid = window.location.search.substring(1).match(/(^|&)fbpxid=([^&]*)(&|$)/);
    fbpxid = fbpxid ? decodeURIComponent(fbpxid[2]) : '';
    if (!fbpxid) {
      fbpxid = localStorage.getItem('url_key_fbpxid');
    }
    if (fbpxid) {
      !function (f, b, e, v, n, t, s) {
        if (f.fbq) return; n = f.fbq = function () {
          n.callMethod ?
            n.callMethod.apply(n, arguments) : n.queue.push(arguments)
        };
        if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
        n.queue = []; t = b.createElement(e); t.async = !0;
        t.src = v; s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s)
      }(window, document, 'script',
        'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', fbpxid);
      fbq('track', 'PageView');
    }
  </script>
  <!-- Meta Pixel Code End -->

  <!-- TikTok Pixel Code Start -->
  <script>
    var ttpxid = window.location.search.substring(1).match(/(^|&)ttpxid=([^&]*)(&|$)/);
    ttpxid = ttpxid ? decodeURIComponent(ttpxid[2]) : '';
    if (!ttpxid) {
      ttpxid = localStorage.getItem('url_key_ttpxid');
    }
    if (ttpxid) {
      !function (w, d, t) {
        w.TiktokAnalyticsObject = t; var ttq = w[t] = w[t] || []; ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"], ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }; for (var i = 0; i < ttq.methods.length; i++)ttq.setAndDefer(ttq, ttq.methods[i]); ttq.instance = function (t) { for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)ttq.setAndDefer(e, ttq.methods[n]); return e }, ttq.load = function (e, n) { var i = "https://analytics.tiktok.com/i18n/pixel/events.js"; ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = i, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {}; var o = document.createElement("script"); o.type = "text/javascript", o.async = !0, o.src = i + "?sdkid=" + e + "&lib=" + t; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(o, a) };
        ttq.load(ttpxid);
        ttq.page();
      }(window, document, 'ttq');
    }
  </script>
  <!-- TikTok Pixel Code End -->

  <!-- Kwai Pixel Code Start -->
  <script>
    var kwpxid = window.location.search.substring(1).match(/(^|&)kwpxid=([^&]*)(&|$)/);
    kwpxid = kwpxid ? decodeURIComponent(kwpxid[2]) : '';
    if (!kwpxid) {
      kwpxid = localStorage.getItem('url_key_kwpxid');
    }
    if (kwpxid) {
      !function (e, t) { "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.install = t() : e.install = t() }(window, (function () { return function (e) { var t = {}; function n(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } return n.m = e, n.c = t, n.d = function (e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var o in e) n.d(r, o, function (t) { return e[t] }.bind(null, o)); return r }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 0) }([function (e, t, n) { "use strict"; var r = this && this.__spreadArray || function (e, t, n) { if (n || 2 === arguments.length) for (var r, o = 0, i = t.length; o < i; o++)!r && o in t || (r || (r = Array.prototype.slice.call(t, 0, o)), r[o] = t[o]); return e.concat(r || Array.prototype.slice.call(t)) }; !function (e) { var t = window; t.KwaiAnalyticsObject = e, t[e] = t[e] || []; var n = t[e]; n.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"]; var o = function (e, t) { e[t] = function () { var n = Array.from(arguments), o = r([t], n, !0); e.push(o) } }; n.methods.forEach((function (e) { o(n, e) })), n.instance = function (e) { var t = n._i[e] || []; return n.methods.forEach((function (e) { o(t, e) })), t }, n.load = function (t, r) { n._i = n._i || {}, n._i[t] = [], n._i[t]._u = "https://s1.kwai.net/kos/s101/nlav11187/pixel/events.js", n._t = n._t || {}, n._t[t] = +new Date, n._o = n._o || {}, n._o[t] = r || {}; var o = document.createElement("script"); o.type = "text/javascript", o.async = !0, o.src = "https://s1.kwai.net/kos/s101/nlav11187/pixel/events.js?sdkid=" + t + "&lib=" + e; var i = document.getElementsByTagName("script")[0]; i.parentNode.insertBefore(o, i) } }("kwaiq") }]) }));
      kwaiq.load(kwpxid);
      kwaiq.page();
    }
  </script>
  <!-- Kwai Pixel Code End -->
</head>
<body>
  <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="0"></canvas>
  <div id="splash">
    <div id="donut"></div>
    <div id="progress">Loading... 0.00%</div>
  </div>

<script src="src/settings.js" charset="utf-8"></script>
<script src="main.js" charset="utf-8"></script>

<script type="text/javascript">
(function () {
    // open web debugger console
    if (typeof VConsole !== 'undefined') {
        window.vConsole = new VConsole();
    }

    document.getElementById('splash').style.display = 'block';
    document.getElementById('donut').style.display = 'block';

    var progress = document.getElementById('progress');
    var progressTextDefault = progress.innerText;
    var progressPercent = 0;
    window.setSplashProgress = function (percent) {
      if (typeof percent != 'number' || isNaN(percent) || percent < progressPercent) {
        return;
      }
      if (percent > 1) {
        percent = 1;
      }
      progressPercent = percent;
      progress.innerText = progressTextDefault.replace('0.00', (progressPercent * 100).toFixed(2));
    };

    setSplashProgress(0.01);

    function fetchScript(moduleName, onProgress, onLoad, size) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', moduleName, true);
      xhr.onprogress = function (e) {
        var total = e.total || size;
        var percent = e.loaded / total;
        onProgress(percent);
      };
      xhr.onload = function () {
        if (xhr.status === 200) {
          onLoad(xhr.response);
        }
      };
      xhr.onerror = function () {
        window.location.reload();
      };
      xhr.send();
    }

    var cocosPercent = 0;
    var mainPercent = 0;
    function setScriptProgress() {
      setSplashProgress(cocosPercent * 0.4 + mainPercent * 0.4);
    }

    var cocosLoaded = false;
    var mainLoaded = false;
    function scriptLoadComplete() {
      if (cocosLoaded && mainLoaded) {
        window.boot();
      }
    }

    fetchScript(
      window._CCSettings.debug ? 'cocos2d-js.js' : 'cocos2d-js-min.js',
      function (percent) {
        cocosPercent = percent;
        setScriptProgress();
      },
      function (response) {
        var script = document.createElement('script');
        script.text = response;
        document.body.appendChild(script);
        window.cc.__h5_chn__ = '';
        window.cc.__h5_pf__ = '';
        window.cc.__h5_crv__ = '';
        cocosPercent = 1;
        setScriptProgress();
        cocosLoaded = true;
        scriptLoadComplete();
      },
      1.1 * 1024 * 1024
    );

    fetchScript(
      'assets/main/index.' + window._CCSettings.bundleVers.main + '.js',
      function (percent) {
        mainPercent = percent;
        setScriptProgress();
      },
      function () {
        mainPercent = 1;
        setScriptProgress();
        mainLoaded = true;
        scriptLoadComplete();
      },
      1.2 * 1024 * 1024
    );
})();
</script>
</body>
</html>
