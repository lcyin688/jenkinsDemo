{"version":3,"sources":["assets/cases/03_gameplay/01_player_control/OnMultiTouch/OnMultiTouchCtrl.js"],"names":["TipManager","require","cc","Class","Component","properties","canvas","Node","target","onLoad","init","self","parent","node","on","EventType","TOUCH_MOVE","event","touches","getTouches","length","touch1","touch2","delta1","getDelta","delta2","touchPoint1","convertToNodeSpaceAR","getLocation","touchPoint2","distance","sub","delta","scale","Math","abs","x","y","onEnable","sys","browserType","BROWSER_TYPE_UC","screen","fullScreen","createTips"],"mappings":";;;;;;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,sCAAD,CAA1B;;AAEAC,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,MAAM,EAAEJ,EAAE,CAACK,IADH;IAERC,MAAM,EAAEN,EAAE,CAACK;EAFH,CAHP;EAQLE,MAAM,EAAE,kBAAY;IAChBT,UAAU,CAACU,IAAX;IACA,IAAIC,IAAI,GAAG,IAAX;IAAA,IAAiBC,MAAM,GAAG,KAAKC,IAAL,CAAUD,MAApC;IACAD,IAAI,CAACL,MAAL,CAAYQ,EAAZ,CAAeZ,EAAE,CAACK,IAAH,CAAQQ,SAAR,CAAkBC,UAAjC,EAA6C,UAAUC,KAAV,EAAiB;MAC1D,IAAIC,OAAO,GAAGD,KAAK,CAACE,UAAN,EAAd;;MACA,IAAID,OAAO,CAACE,MAAR,IAAkB,CAAtB,EAAyB;QACrB,IAAIC,MAAM,GAAGH,OAAO,CAAC,CAAD,CAApB;QAAA,IAAyBI,MAAM,GAAGJ,OAAO,CAAC,CAAD,CAAzC;QACA,IAAIK,MAAM,GAAGF,MAAM,CAACG,QAAP,EAAb;QAAA,IAAgCC,MAAM,GAAGH,MAAM,CAACE,QAAP,EAAzC;QACA,IAAIE,WAAW,GAAGd,MAAM,CAACe,oBAAP,CAA4BN,MAAM,CAACO,WAAP,EAA5B,CAAlB;QACA,IAAIC,WAAW,GAAGjB,MAAM,CAACe,oBAAP,CAA4BL,MAAM,CAACM,WAAP,EAA5B,CAAlB,CAJqB,CAKrB;;QACA,IAAIE,QAAQ,GAAGJ,WAAW,CAACK,GAAZ,CAAgBF,WAAhB,CAAf;QACA,IAAIG,KAAK,GAAGT,MAAM,CAACQ,GAAP,CAAWN,MAAX,CAAZ;QACA,IAAIQ,KAAK,GAAG,CAAZ;;QACA,IAAIC,IAAI,CAACC,GAAL,CAASL,QAAQ,CAACM,CAAlB,IAAuBF,IAAI,CAACC,GAAL,CAASL,QAAQ,CAACO,CAAlB,CAA3B,EAAiD;UAC7CJ,KAAK,GAAG,CAACH,QAAQ,CAACM,CAAT,GAAaJ,KAAK,CAACI,CAApB,IAAyBN,QAAQ,CAACM,CAAlC,GAAsCzB,IAAI,CAACH,MAAL,CAAYyB,KAA1D;QACH,CAFD,MAGK;UACDA,KAAK,GAAG,CAACH,QAAQ,CAACO,CAAT,GAAaL,KAAK,CAACK,CAApB,IAAyBP,QAAQ,CAACO,CAAlC,GAAsC1B,IAAI,CAACH,MAAL,CAAYyB,KAA1D;QACH;;QACDtB,IAAI,CAACH,MAAL,CAAYyB,KAAZ,GAAoBA,KAAK,GAAG,GAAR,GAAc,GAAd,GAAoBA,KAAxC;MACH;IACJ,CAnBD,EAmBGtB,IAAI,CAACE,IAnBR;EAoBH,CA/BI;EAiCLyB,QAjCK,sBAiCO;IACR,IAAIpC,EAAE,CAACqC,GAAH,CAAOC,WAAP,KAAuBtC,EAAE,CAACqC,GAAH,CAAOE,eAA9B,IAAiDvC,EAAE,CAACwC,MAAH,CAAUC,UAAV,EAArD,EAA6E;MACzE3C,UAAU,CAAC4C,UAAX,CAAsB,8DAAtB;IACH;EACJ;AArCI,CAAT","sourceRoot":"/","sourcesContent":["const TipManager = require(\"../../../../scripts/Tips/TipsManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        canvas: cc.Node,\n        target: cc.Node\n    },\n\n    onLoad: function () {\n        TipManager.init();\n        var self = this, parent = this.node.parent;\n        self.canvas.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n            var touches = event.getTouches();\n            if (touches.length >= 2) {\n                var touch1 = touches[0], touch2 = touches[1];\n                var delta1 = touch1.getDelta(), delta2 = touch2.getDelta();\n                var touchPoint1 = parent.convertToNodeSpaceAR(touch1.getLocation());\n                var touchPoint2 = parent.convertToNodeSpaceAR(touch2.getLocation());\n                //缩放\n                var distance = touchPoint1.sub(touchPoint2);\n                var delta = delta1.sub(delta2);\n                var scale = 1;\n                if (Math.abs(distance.x) > Math.abs(distance.y)) {\n                    scale = (distance.x + delta.x) / distance.x * self.target.scale;\n                }\n                else {\n                    scale = (distance.y + delta.y) / distance.y * self.target.scale;\n                }\n                self.target.scale = scale < 0.1 ? 0.1 : scale;\n            }\n        }, self.node);\n    },\n\n    onEnable () {\n        if (cc.sys.browserType === cc.sys.BROWSER_TYPE_UC && cc.screen.fullScreen()) {\n            TipManager.createTips(\"Can't support UC mobile browser, please touch screen go back\");\n        }\n    }\n});\n"]}