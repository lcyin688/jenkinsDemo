{"version":3,"sources":["assets/cases/graphics/demo/sine-waves.js"],"names":["PI180","Math","PI","PI2","HALFPI","Ease","linear","percent","amplitude","sinein","sin","sineout","sineinout","EaseEnumOptins","k","Enum","cc","Waves","sine","x","sign","isNaN","square","sawtooth","floor","triangle","abs","WavesEnumOptins","Wave","Class","name","properties","timeModifier","wavelength","segmentLength","lineWidth","waveType","type","easeType","strokeColor","color","SineWaves","Component","speed","waves","onLoad","time","ctx","getComponent","Graphics","lineCap","LineCap","BUTT","lineJoin","LineJoin","ROUND","i","l","length","waveFn","bind","easeFn","update","dt","clear","yAxis","visibleRect","height","width","waveWidth","waveLeft","drawWave","options","moveTo","lineTo","point","getPoint","y","stroke","position","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["// https://github.com/isuttell/sine-waves\n\n/************************************************\n * @file  Constants\n * @author  Isaac Suttell\n ************************************************/\n \n/**\n * For radian conversion\n *\n * @constant\n * @type    {Number}\n */\nvar PI180 = Math.PI / 180;\n\n/**\n * Twice of PI\n *\n * @constant\n * @type {Number}\n */\nvar PI2 = Math.PI * 2;\n\n/**\n * Half of PI\n *\n * @constant\n * @type {Number}\n */\nvar HALFPI = Math.PI / 2;\n\n/************************************************\n * @file  Left to right easing functions\n * @author Isaac Suttell\n ************************************************/\n\n/**\n * This holds all of the easing objects and can be added to by the user\n *\n * @type    {Object}\n */\nvar Ease = {};\n\n/**\n * Do not apply any easing\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.linear = function(percent, amplitude) {\n  return amplitude;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sinein = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * Math.PI - HALFPI) + 1) * 0.5;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sineout = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * Math.PI + HALFPI) + 1) * 0.5;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sineinout = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * PI2 - HALFPI) + 1) * 0.5;\n};\n\nlet EaseEnumOptins = {};\nfor (let k in Ease) {\n    EaseEnumOptins[k] = -1;\n}\nEase.Enum = cc.Enum(EaseEnumOptins);\n\n/************************************************\n * @file  Sine Wave functions\n * @author Isaac Suttell\n ************************************************/\n\n/**\n * Holds the different types of waves\n *\n * @type    {Object}\n */\nvar Waves = {};\n\n/**\n * Default Sine Waves\n *\n * @param    {Number}    x\n */\nWaves.sine = function(x) {\n  return Math.sin(x);\n};\n\n\n/**\n * Sign polyfill\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n *\n * @param     {Number}    x\n *\n * @return    {Number}\n */\nWaves.sign = function(x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n/**\n * Square Waves\n *\n * @param    {Number}    x\n */\nWaves.square = function(x) {\n  return Waves.sign(Math.sin(x * PI2));\n};\n\n/**\n * Sawtooth Waves\n *\n * @param    {Number}    x\n */\nWaves.sawtooth = function(x) {\n  return (x - Math.floor(x + 0.5)) * 2;\n};\n\n/**\n * Triangle Waves\n *\n * @param    {Number}    x\n */\nWaves.triangle = function(x) {\n  return Math.abs(Waves.sawtooth(x));\n};\n\nlet WavesEnumOptins = {};\nfor (let k in Waves) {\n    WavesEnumOptins[k] = -1;\n}\nWaves.Enum = cc.Enum(WavesEnumOptins);\n\n\nlet Wave = cc.Class({\n    name: 'Wave',\n\n    properties: {\n        timeModifier: 1,\n        amplitude: 50,\n        wavelength: 50,\n        segmentLength: 10,\n        lineWidth: 1,\n        waveType: {\n            default: Waves.Enum.sine,\n            type: Waves.Enum\n        },\n        easeType: {\n            default: Ease.Enum.sinein,\n            type: Ease.Enum\n        },\n        strokeColor: cc.color(255, 255, 255, 100)\n    }\n});\n\nlet SineWaves = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        speed: 1,\n\n        waves: {\n            default: function () {\n                return [new Wave()];\n            },\n            type: [Wave]\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.time = 0;\n\n        this.ctx = this.getComponent(cc.Graphics);\n        this.ctx.lineCap = cc.Graphics.LineCap.BUTT;\n        this.ctx.lineJoin = cc.Graphics.LineJoin.ROUND;\n\n        let waves = this.waves;\n        for (let i = 0, l = waves.length; i < l; i++) {\n            waves[i].waveFn = Waves[Waves.Enum[waves[i].waveType]].bind(Waves);\n            waves[i].easeFn = Ease[Ease.Enum[waves[i].easeType]].bind(Ease);\n        }\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        this.ctx.clear();\n\n        this.yAxis = cc.visibleRect.height/2;\n        this.width = cc.visibleRect.width;\n\n        this.waveWidth = this.width * 0.95;\n        this.waveLeft = this.width * 0.25;\n\n        this.time += dt;\n\n        // Draw each line\n        let waves = this.waves;\n        for (let i = 0, l = waves.length; i < l; i++) {\n            var timeModifier = this.waves[i].timeModifier || 1;\n            this.drawWave(this.time * timeModifier, waves[i]);\n        }\n    },\n\n    /**\n     * Draws one line on the canvas\n     *\n     * @param  {Number} time    current internal clock time\n     * @param  {Object} options wave options\n     */\n    drawWave: function (time, options) {\n        // Styles\n        this.ctx.lineWidth = options.lineWidth;\n        this.ctx.strokeColor = options.strokeColor;\n\n        // Starting Line\n        this.ctx.moveTo(0, this.yAxis);\n        this.ctx.lineTo(this.waveLeft, this.yAxis);\n\n        for (let i = 0; i < this.waveWidth; i += options.segmentLength) {\n            // Calculate where the next point is\n            let point = this.getPoint(time, i, options);\n\n            // Draw to it\n            this.ctx.lineTo(point.x, point.y);\n        }\n\n        // Ending Line\n        this.ctx.lineTo(this.width, this.yAxis);\n\n        // Stroke it\n        this.ctx.stroke();\n    },\n\n    /**\n     * Calculate the x, y coordinates of a point in a sine wave\n     *\n     * @param  {Number} time     Internal time index\n     * @param  {Number} position Pixels x poistion\n     * @param  {Object} options  Wave options\n     *\n     * @return {Object}          {x, y}\n     */\n    getPoint: function(time, position, options) {\n        var x = (time * this.speed) + (-this.yAxis + position) / options.wavelength;\n        var y = options.waveFn(x);\n\n        // Left and Right Sine Easing\n        var amplitude = options.easeFn(position / this.waveWidth, options.amplitude);\n\n        x = position + this.waveLeft;\n        y = amplitude * y + this.yAxis;\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n});\n\nmodule.exports = SineWaves;\n"]}