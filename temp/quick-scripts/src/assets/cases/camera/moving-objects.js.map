{"version":3,"sources":["assets/cases/camera/moving-objects.js"],"names":["cc","Class","Component","properties","tempPrefab","type","Node","camera","root","moveSpeed","nodeCount","_useCamera","useCamera","get","set","v","CC_EDITOR","movingNode","x","onEnable","onDisable","onLoad","console","time","i","node","instantiate","Math","random","y","parent","timeEnd","update","dt","useCameraChanged","toggle","isChecked","group"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,UAAU,EAAE;MACR,WAAS,IADD;MAERC,IAAI,EAAEL,EAAE,CAACM;IAFD,CADJ;IAKRC,MAAM,EAAE;MACJ,WAAS,IADL;MAEJF,IAAI,EAAEL,EAAE,CAACM;IAFL,CALA;IASRE,IAAI,EAAE;MACF,WAAS,IADP;MAEFH,IAAI,EAAEL,EAAE,CAACM;IAFP,CATE;IAcRG,SAAS,EAAE,GAdH;IAeRC,SAAS,EAAE,IAfH;IAiBRC,UAAU,EAAE,IAjBJ;IAkBRC,SAAS,EAAE;MACPC,GAAG,EAAE,eAAY;QACb,OAAO,KAAKF,UAAZ;MACH,CAHM;MAIPG,GAAG,EAAE,aAAUC,CAAV,EAAa;QACd,IAAI,KAAKJ,UAAL,KAAoBI,CAAxB,EAA2B;QAE3B,KAAKJ,UAAL,GAAkBI,CAAlB;;QAEA,IAAI,CAACC,SAAD,IAAc,KAAKC,UAAvB,EAAmC;UAC/B,KAAKA,UAAL,GAAkBF,CAAC,GAAG,KAAKR,MAAR,GAAiB,KAAKC,IAAzC;UACA,KAAKD,MAAL,CAAYW,CAAZ,GAAgB,KAAKV,IAAL,CAAUU,CAAV,GAAc,CAA9B;UACA,KAAKT,SAAL,GAAiB,CAAC,KAAKA,SAAvB;QACH;MACJ;IAdM;EAlBH,CAHP;EAuCLU,QAAQ,EAAE,oBAAY,CACrB,CAxCI;EA0CLC,SAAS,EAAE,qBAAY,CACtB,CA3CI;EA6CL;EACAC,MAAM,EAAE,kBAAY;IAChBC,OAAO,CAACC,IAAR,CAAa,uBAAb;;IAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKd,SAAzB,EAAoCc,CAAC,EAArC,EAAyC;MACrC,IAAIC,IAAI,GAAGzB,EAAE,CAAC0B,WAAH,CAAe,KAAKtB,UAApB,CAAX;MACAqB,IAAI,CAACP,CAAL,GAAS,CAACS,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAwB,GAAjC;MACAH,IAAI,CAACI,CAAL,GAAS,CAACF,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAwB,GAAjC;MACAH,IAAI,CAACK,MAAL,GAAc,KAAKtB,IAAnB;IACH;;IAED,KAAKS,UAAL,GAAkB,KAAKN,UAAL,GAAkB,KAAKJ,MAAvB,GAAgC,KAAKC,IAAvD;IAEAc,OAAO,CAACS,OAAR,CAAgB,uBAAhB;EACH,CA3DI;EA6DL;EACAC,MAAM,EAAE,gBAAUC,EAAV,EAAc;IAClB,KAAKhB,UAAL,CAAgBC,CAAhB,IAAqB,KAAKT,SAAL,GAAiBwB,EAAtC;;IACA,IAAK,KAAKxB,SAAL,GAAiB,CAAjB,IAAsB,KAAKQ,UAAL,CAAgBC,CAAhB,GAAoB,GAA3C,IACC,KAAKT,SAAL,GAAiB,CAAjB,IAAsB,KAAKQ,UAAL,CAAgBC,CAAhB,GAAoB,CAAC,GADhD,EACsD;MAClD,KAAKT,SAAL,IAAkB,CAAC,CAAnB;IACH;EACJ,CApEI;EAsELyB,gBAAgB,EAAE,0BAAUC,MAAV,EAAkB;IAChC,KAAKvB,SAAL,GAAiBuB,MAAM,CAACC,SAAxB;IACA,KAAK5B,IAAL,CAAU6B,KAAV,GAAkB,KAAKzB,SAAL,GAAiB,OAAjB,GAA2B,SAA7C;EACH;AAzEI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tempPrefab: {\n            default: null,\n            type: cc.Node\n        },\n        camera: {\n            default: null,\n            type: cc.Node\n        },\n        root: {\n            default: null,\n            type: cc.Node\n        },\n\n        moveSpeed: 100,\n        nodeCount: 2000,\n\n        _useCamera: true,\n        useCamera: {\n            get: function () {\n                return this._useCamera;\n            },\n            set: function (v) {\n                if (this._useCamera === v) return;\n\n                this._useCamera = v;\n\n                if (!CC_EDITOR && this.movingNode) {\n                    this.movingNode = v ? this.camera : this.root;\n                    this.camera.x = this.root.x = 0;\n                    this.moveSpeed = -this.moveSpeed;\n                }\n            }\n        }\n    },\n\n    onEnable: function () {\n    },\n\n    onDisable: function () {\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        console.time('move-objects : onLoad')\n\n        for (var i = 0; i < this.nodeCount; i++) {\n            var node = cc.instantiate(this.tempPrefab);\n            node.x = (Math.random() - 0.5) * 960;\n            node.y = (Math.random() - 0.5) * 640;\n            node.parent = this.root;\n        }\n\n        this.movingNode = this._useCamera ? this.camera : this.root;\n        \n        console.timeEnd('move-objects : onLoad')\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        this.movingNode.x += this.moveSpeed * dt;\n        if ((this.moveSpeed > 0 && this.movingNode.x > 900) || \n            (this.moveSpeed < 0 && this.movingNode.x < -900)) {\n            this.moveSpeed *= -1;\n        }\n    },\n\n    useCameraChanged: function (toggle) {\n        this.useCamera = toggle.isChecked;\n        this.root.group = this.useCamera ? 'Actor' : 'Default';\n    },\n});\n"]}