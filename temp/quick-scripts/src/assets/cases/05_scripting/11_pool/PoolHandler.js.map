{"version":3,"sources":["assets/cases/05_scripting/11_pool/PoolHandler.js"],"names":["lastClick","pauseresume","now","Date","stopAllActions","pool","getComponent","_pool","put","removeFromParent","paused","cc","director","getActionManager","resumeTarget","pauseTarget","Class","Component","properties","onLoad","reuse","unuse","node","off","Node","EventType","TOUCH_END","on"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAG,CAAhB;;AAEA,SAASC,WAAT,GAAwB;EACpB,IAAIC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAV,CADoB,CAEpB;;EACA,IAAIA,GAAG,GAAGF,SAAN,GAAkB,GAAtB,EAA2B;IACvB,KAAKI,cAAL;;IACA,IAAIC,IAAI,GAAG,KAAKC,YAAL,CAAkB,aAAlB,EAAiCC,KAA5C;;IACA,IAAIF,IAAJ,EAAU;MACNA,IAAI,CAACG,GAAL,CAAS,IAAT;IACH,CAFD,MAGK;MACD,KAAKC,gBAAL,CAAsB,IAAtB;IACH;EACJ,CATD,CAUA;EAVA,KAWK;IACD,IAAI,KAAKC,MAAT,EAAiB;MACbC,EAAE,CAACC,QAAH,CAAYC,gBAAZ,GAA+BC,YAA/B,CAA4C,IAA5C;IACH,CAFD,MAGK;MACDH,EAAE,CAACC,QAAH,CAAYC,gBAAZ,GAA+BE,WAA/B,CAA2C,IAA3C;IACH;;IACD,KAAKL,MAAL,GAAc,CAAC,KAAKA,MAApB;EACH;;EACDV,SAAS,GAAGE,GAAZ;AACH;;AAEDS,EAAE,CAACK,KAAH,CAAS;EACL,WAASL,EAAE,CAACM,SADP;EAGLC,UAAU,EAAE;IACRX,KAAK,EAAE;EADC,CAHP;EAOLY,MAAM,EAAE,kBAAY;IAChB,KAAKC,KAAL;EACH,CATI;EAWLC,KAAK,EAAE,iBAAY;IACf,KAAKC,IAAL,CAAUC,GAAV,CAAcZ,EAAE,CAACa,IAAH,CAAQC,SAAR,CAAkBC,SAAhC,EAA2CzB,WAA3C,EAAwD,KAAKqB,IAA7D;EACH,CAbI;EAeLF,KAAK,EAAE,iBAAY;IACf,KAAKE,IAAL,CAAUZ,MAAV,GAAmB,KAAnB;IACA,KAAKY,IAAL,CAAUK,EAAV,CAAahB,EAAE,CAACa,IAAH,CAAQC,SAAR,CAAkBC,SAA/B,EAA0CzB,WAA1C,EAAuD,KAAKqB,IAA5D;EACH;AAlBI,CAAT","sourceRoot":"/","sourcesContent":["var lastClick = 0;\n\nfunction pauseresume () {\n    var now = Date.now();\n    // Double click in 300 ms\n    if (now - lastClick < 300) {\n        this.stopAllActions();\n        var pool = this.getComponent('PoolHandler')._pool;\n        if (pool) {\n            pool.put(this);\n        }\n        else {\n            this.removeFromParent(true);\n        }\n    }\n    // Click\n    else {\n        if (this.paused) {\n            cc.director.getActionManager().resumeTarget(this);\n        }\n        else {\n            cc.director.getActionManager().pauseTarget(this);\n        }\n        this.paused = !this.paused;\n    }\n    lastClick = now;\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _pool: null\n    },\n    \n    onLoad: function () {\n        this.reuse();\n    },\n    \n    unuse: function () {\n        this.node.off(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\n    },\n    \n    reuse: function () {\n        this.node.paused = false;\n        this.node.on(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\n    }\n});\n"]}