{"version":3,"sources":["assets/cases/05_scripting/06_asset_loading/PreloadAssets/PreloadAssets.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAC1C,4CAA8C;AAG9C;IAA2C,iCAAY;IAAvD;QAAA,qEA4QC;QAzQU,cAAQ,GAAQ,IAAI,CAAC;QAGrB,gBAAU,GAAY,IAAI,CAAC;QAG3B,wBAAkB,GAAc,IAAI,CAAC;QAGrC,cAAQ,GAAmB,EAAE,CAAC;QAE7B,cAAQ,GAAW,EAAE,CAAC;QAEtB,eAAS,GAAW,EAAE,CAAC;QAEvB,eAAS,GAAQ,IAAI,CAAC;QAEtB,kBAAY,GAAmB,IAAI,CAAC;QAEpC,gBAAU,GAAY,KAAK,CAAC;QAE5B,WAAK,GAA2B,IAAI,CAAC;QAErC,aAAO,GAAoB,EAAE,CAAC;;QAiPtC,iBAAiB;IACrB,CAAC;IAhPG,wBAAwB;IAExB,8BAAM,GAAN;QACI,mBAAmB;QACnB,IAAI,CAAC,KAAK,GAAG;YACT,KAAK,EAAE,mBAAmB;YAC1B,GAAG,EAAE,kBAAkB;YACvB,OAAO,EAAE,2BAA2B;YACpC,IAAI,EAAE,kBAAkB;YACxB,KAAK,EAAE,kBAAkB;YACzB,WAAW,EAAE,mBAAmB;YAChC,MAAM,EAAE,oBAAoB;YAC5B,SAAS,EAAE,yBAAyB;YACpC,KAAK,EAAE,0BAA0B;YACjC,KAAK,EAAE,mBAAmB;YAC1B,GAAG,EAAE,OAAO;SACf,CAAC;QACF,mBAAmB;QACnB,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IAED,0CAAkB,GAAlB;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YAC3C,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC9E;IACL,CAAC;IAED,gCAAQ,GAAR,UAAU,KAAK;QACX,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,OAAO;SACV;QAED,IAAI,CAAC,QAAQ,EAAE,CAAC;QAEhB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,IAAI,CAAC,SAAS,KAAK,EAAE,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,EAAE;YAC3D,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC5B,OAAO;SACV;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,wDAAwD,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;SAC9G;QAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAE/E,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC;QACvD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAED,6BAAK,GAAL;QACI,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpC,IAAI,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACnB,KAAK,aAAa;gBACd,wDAAwD;gBACxD,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;gBACxD,MAAM;YACV,KAAK,OAAO;gBACR,iEAAiE;gBACjE,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBACzD,MAAM;YACV,KAAK,MAAM;gBACP,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;gBACjD,MAAM;YACV,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,aAAa,EAAE,YAAY,CAAC,CAAC;gBAC1D,MAAM;YACV,KAAK,WAAW,CAAC;YACjB,KAAK,QAAQ,CAAC;YACd,KAAK,SAAS,CAAC;YACf,KAAK,KAAK,CAAC;YACX,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;gBACxC,MAAM;YACV,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;gBAC7C,MAAM;YACV,KAAK,KAAK;gBACN,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;gBAC3C,MAAM;YACV;gBACI,MAAM;SACb;IACL,CAAC;IAED,qCAAa,GAAb,UAAe,GAAG,EAAE,GAAG;QACnB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,GAAG,CAAC,aAAa,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YAClC,OAAO;SACV;QACD,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,EAAE;YAC3B,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,wDAAwD,CAAC,CAAC;SAC7F;aACI;YACD,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,wDAAwD,CAAC,CAAC;SAC7F;QACD,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,GAAG,0BAA0B,CAAC;IACvE,CAAC;IAED,gCAAQ,GAAR;QACI,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,YAAY,EAAE,CAAC,WAAW,EAAE;YAClE,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;SAC5B;IACL,CAAC;IAED,uCAAe,GAAf,UAAiB,KAAK;QAAtB,iBAyDC;QAxDG,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpC,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACnB,KAAK,aAAa;gBACd,wDAAwD;gBACxD,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,WAAW,EAAE,UAAC,GAAU,EAAE,GAAa;oBAC7D,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,OAAO;gBACR,iEAAiE;gBACjE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,YAAY,EAAE,UAAC,GAAU,EAAE,GAAa;oBAC9D,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,MAAM;gBACP,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,UAAC,GAAU,EAAE,GAAa;oBACtD,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,aAAa,EAAE,UAAC,GAAU,EAAE,GAAa;oBAC/D,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,WAAW,CAAC;YACjB,KAAK,QAAQ,CAAC;YACd,KAAK,SAAS,CAAC;YACf,KAAK,KAAK,CAAC;YACX,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,UAAC,GAAU,EAAE,GAAa;oBAC7C,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,OAAO;gBACR,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE,UAAC,GAAU,EAAE,GAAkB;oBACvD,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAC9B,CAAC,CAAC,CAAC;gBACH,MAAM;YACV,KAAK,KAAK;gBACN,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,UAAC,GAAU,EAAE,GAAe;oBAClD,KAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,oBAAoB,CAAC;oBAC7C,GAAG,CAAC,OAAO,CAAC,UAAC,CAAC;wBACV,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;wBAC9B,KAAI,CAAC,QAAQ,CAAC,OAAO,IAAO,CAAC,CAAC,IAAI,MAAG,CAAC;oBAC1C,CAAC,CAAC,CAAC;gBAEP,CAAC,CAAC,CAAC;gBACH,MAAM;YACV;gBACI,MAAM;SACb;IACL,CAAC;IAED,mCAAW,GAAX,UAAa,IAAI,EAAE,GAAG;QAClB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,EAAE,CAAC;QAC3B,IAAI,IAAI,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvB,IAAI,SAAS,GAAG,IAAI,CAAC;QACrB,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACnB,KAAK,aAAa;gBACd,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;gBACzC,SAAS,CAAC,WAAW,GAAG,GAAG,CAAC;gBAC5B,MAAM;YACV,KAAK,SAAS,CAAC;YACf,KAAK,MAAM;gBACP,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;gBACzC,SAAS,CAAC,WAAW,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBAChD,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;gBAC9C,SAAS,CAAC,IAAI,GAAG,GAAG,CAAC;gBACrB,SAAS,CAAC,IAAI,EAAE,CAAC;gBACjB,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;gBAC9B,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,wDAAwD,CAAC,CAAC;gBACzF,MAAM;YACV,KAAK,KAAK;gBACN,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;gBACxC,SAAS,CAAC,UAAU,GAAG,EAAE,CAAC;gBAC1B,SAAS,CAAC,MAAM,GAAG,GAAG,CAAC;gBACvB,MAAM;YACV,KAAK,MAAM;gBACP,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;gBACxC,SAAS,CAAC,IAAI,GAAG,GAAG,CAAC;gBACrB,SAAS,CAAC,UAAU,GAAG,EAAE,CAAC;gBAC1B,SAAS,CAAC,MAAM,GAAG,qBAAqB,CAAC;gBACzC,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;gBACjD,SAAS,CAAC,IAAI,GAAG,GAAG,CAAC;gBACrB,SAAS,CAAC,WAAW,EAAE,CAAC;gBACxB,MAAM;YACV,KAAK,QAAQ;gBACT,IAAI,MAAM,GAAG,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBACjC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;gBACrB,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACzB,MAAM;YACV,KAAK,WAAW;gBACZ,IAAI,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACvD,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;gBACvB,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC3B,IAAI,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;gBACpD,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACzB,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC3C,SAAS,CAAC,YAAY,GAAG,GAAG,CAAC;gBAC7B,SAAS,CAAC,SAAS,GAAG,MAAM,CAAC;gBAC7B,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;gBACd,MAAM;SACb;QAED,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,iCAAS,GAAT;QACI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,EAAE,EAAV,CAAU,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IAtQD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACS;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACgB;IAGlC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6DACwB;IAG5C;QADC,QAAQ,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAC,CAAC;mDACS;IAZpB,aAAa;QADjC,OAAO;OACa,aAAa,CA4QjC;IAAD,oBAAC;CA5QD,AA4QC,CA5Q0C,EAAE,CAAC,SAAS,GA4QtD;kBA5QoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\nimport * as i18n from '../../../../i18n/i18n';\n\n@ccclass\nexport default class PreloadAssets extends cc.Component {\n\n    @property(cc.Label)\n    public loadTips: any = null;\n\n    @property(cc.Node)\n    public showWindow: cc.Node = null;\n\n    @property(cc.Prefab)\n    public loadAnimTestPrefab: cc.Prefab = null;\n\n    @property({type: [cc.Node]})\n    public loadList: Array<cc.Node> = [];\n\n    private _curType: string = '';\n\n    private _lastType: string = '';\n\n    private _btnLabel: any = null;\n\n    private _audioSource: cc.AudioSource = null;\n\n    private _isLoading: Boolean = false;\n\n    private _urls: Record<string, string> = null;\n\n    private _assets: Array<cc.Asset> = [];\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        // add load res url\n        this._urls = {\n            Audio: \"test_assets/audio\",\n            Txt: \"test_assets/text\",\n            Texture: \"test_assets/PurpleMonster\",\n            Font: \"test_assets/font\",\n            Plist: \"test_assets/atom\",\n            SpriteFrame: \"test_assets/image\",\n            Prefab: \"test_assets/prefab\",\n            Animation: \"test_assets/sprite-anim\",\n            Scene: \"test_assets/preloadscene\",\n            Spine: \"spineboy/spineboy\",\n            Dir: \"audio\",\n        };\n        // registered event\n        this._onRegisteredEvent();\n    }\n\n    _onRegisteredEvent () {\n        for (var i = 0; i < this.loadList.length; ++i) {\n            this.loadList[i].on(cc.Node.EventType.TOUCH_END, this._onClick.bind(this));\n        }\n    }\n\n    _onClick (event) {\n        if (this._isLoading) {\n            return;\n        }\n\n        this._onClear();\n\n        this._curType = event.target.name.split('_')[1];\n        if (this._lastType !== \"\" && this._curType === this._lastType) {\n            this._onShowResClick(event);\n            return;\n        }\n\n        if (this._btnLabel) {\n            this._btnLabel.textKey = i18n.t(\"cases/05_scripting/07_asset_loading/PreloadAssets.js.1\") + this._lastType;\n        }\n\n        this._lastType = this._curType;\n\n        this._btnLabel = event.target.getChildByName(\"Label\").getComponent(\"cc.Label\");\n\n        this.loadTips.textKey = this._curType + \" Loading....\";\n        this._isLoading = true;\n\n        this._load();\n    }\n\n    _load () {\n        var url = this._urls[this._curType];\n        var loadCallBack = this._loadCallBack.bind(this);\n        switch (this._curType) {\n            case 'SpriteFrame':\n                // specify the type to load sub asset from texture's url\n                cc.resources.preload(url, cc.SpriteFrame, loadCallBack);\n                break;\n            case 'Spine':\n                // specify the type to avoid the duplicated name from spine atlas\n                cc.resources.preload(url, sp.SkeletonData, loadCallBack);\n                break;\n            case 'Font':\n                cc.resources.preload(url, cc.Font, loadCallBack);\n                break;\n            case 'Plist':\n                cc.resources.preload(url, cc.ParticleAsset, loadCallBack);\n                break;\n            case 'Animation':\n            case 'Prefab':\n            case 'Texture':\n            case 'Txt':\n            case 'Audio':\n                cc.resources.preload(url, loadCallBack);\n                break;\n            case 'Scene':\n                cc.resources.preloadScene(url, loadCallBack);\n                break;\n            case 'Dir': \n                cc.resources.preloadDir(url, loadCallBack);\n                break;\n            default:\n                break;\n        }\n    }\n\n    _loadCallBack (err, res) {\n        this._isLoading = false;\n        if (err) {\n            cc.log('Error url [' + err + ']');\n            return;\n        }\n        if (this._curType === \"Audio\") {\n            this._btnLabel.textKey = i18n.t(\"cases/05_scripting/07_asset_loading/PreloadAssets.js.2\");\n        }\n        else {\n            this._btnLabel.textKey = i18n.t(\"cases/05_scripting/07_asset_loading/PreloadAssets.js.3\");\n        }\n        this._btnLabel.textKey += this._curType;\n        this.loadTips.textKey = this._curType + \" preloaded Successfully!\";\n    }\n\n    _onClear () {\n        this.showWindow.removeAllChildren(true);\n        if (this._audioSource && this._audioSource instanceof cc.AudioSource) {\n            this._audioSource.stop();\n        }\n    }\n\n    _onShowResClick (event) {\n        let url = this._urls[this._curType];\n        switch (this._curType) {\n            case 'SpriteFrame':\n                // specify the type to load sub asset from texture's url\n                cc.resources.load(url, cc.SpriteFrame, (err: Error, res: cc.Asset) => {\n                    this._assets.push(res.addRef());\n                    this._createNode(this._curType, res);\n                });\n                break;\n            case 'Spine':\n                // specify the type to avoid the duplicated name from spine atlas\n                cc.resources.load(url, sp.SkeletonData, (err: Error, res: cc.Asset) => {\n                    this._assets.push(res.addRef());\n                    this._createNode(this._curType, res);\n                });\n                break;\n            case 'Font':\n                cc.resources.load(url, cc.Font, (err: Error, res: cc.Asset) => {\n                    this._assets.push(res.addRef());\n                    this._createNode(this._curType, res);\n                });\n                break;\n            case 'Plist':\n                cc.resources.load(url, cc.ParticleAsset, (err: Error, res: cc.Asset) => {\n                    this._assets.push(res.addRef());\n                    this._createNode(this._curType, res);\n                });\n                break;\n            case 'Animation':\n            case 'Prefab':\n            case 'Texture':\n            case 'Txt':\n            case 'Audio':\n                cc.resources.load(url, (err: Error, res: cc.Asset) => {\n                    this._assets.push(res.addRef());\n                    this._createNode(this._curType, res);\n                });\n                break;\n            case 'Scene':\n                cc.resources.loadScene(url, (err: Error, res: cc.SceneAsset) => {\n                    cc.director.runScene(res);\n                });\n                break;\n            case 'Dir': \n                cc.resources.loadDir(url, (err: Error, res: cc.Asset[]) => {\n                    this.loadTips.textKey = \"The asset loaded: \";\n                    res.forEach((r) => {\n                        this._assets.push(r.addRef());\n                        this.loadTips.textKey += `${r.name};`;\n                    });\n                    \n                });\n                break;\n            default:\n                break;\n        }\n    }\n\n    _createNode (type, res) {\n        this.loadTips.textKey = \"\";\n        var node = new cc.Node(\"New \" + type);\n        node.setPosition(0, 0);\n        var component = null;\n        switch (this._curType) {\n            case \"SpriteFrame\":\n                component = node.addComponent(cc.Sprite);\n                component.spriteFrame = res;\n                break;\n            case \"Texture\":\n            case \"CORS\":\n                component = node.addComponent(cc.Sprite);\n                component.spriteFrame = new cc.SpriteFrame(res);\n                break;\n            case \"Audio\":\n                component = node.addComponent(cc.AudioSource);\n                component.clip = res;\n                component.play();\n                this._audioSource = component;\n                this.loadTips.textKey = i18n.t(\"cases/05_scripting/07_asset_loading/PreloadAssets.js.4\");\n                break;\n            case \"Txt\":\n                component = node.addComponent(cc.Label);\n                component.lineHeight = 40;\n                component.string = res;\n                break;\n            case \"Font\":\n                component = node.addComponent(cc.Label);\n                component.font = res;\n                component.lineHeight = 40;\n                component.string = \"This is BitmapFont!\";\n                break;\n            case \"Plist\":\n                component = node.addComponent(cc.ParticleSystem);\n                component.file = res;\n                component.resetSystem();\n                break;\n            case \"Prefab\":\n                var prefab = cc.instantiate(res);\n                prefab.parent = node;\n                prefab.setPosition(0, 0);\n                break;\n            case \"Animation\":\n                var loadAnim = cc.instantiate(this.loadAnimTestPrefab);\n                loadAnim.parent = node;\n                loadAnim.setPosition(0, 0);\n                var AanimCtrl = loadAnim.getComponent(cc.Animation);\n                AanimCtrl.addClip(res);\n                AanimCtrl.play(res.name);\n                break;\n            case \"Spine\":\n                component = node.addComponent(sp.Skeleton);\n                component.skeletonData = res;\n                component.animation = \"walk\";\n                node.y = -248;\n                break;\n        }\n\n        this.showWindow.addChild(node);\n    }\n\n    onDestroy () {\n        this._assets.forEach(x => x.decRef());\n        this._assets = null;\n    }\n\n    // update (dt) {}\n}\n"]}