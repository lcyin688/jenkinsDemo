{"version":3,"sources":["assets/cases/05_scripting/03_events/BasicEventTest/BasicEventCtrl.js"],"names":["TipsManager","require","cc","Class","Component","properties","basicNode","Node","preNode","childNode","tip","Label","start","init","changePosition","resetNode","positionChanged","string","on","EventType","POSITION_CHANGED","x","y","off","changeScale","scaleChanged","SCALE_CHANGED","scaleX","scaleY","changeSize","sizeChanged","oldSize","SIZE_CHANGED","width","height","changeAnchor","anchorChanged","ANCHOR_CHANGED","anchorX","anchorY","changeColor","colorChanged","COLOR_CHANGED","color","Color","addingChild","childAdded","child","getChildrenContent","console","log","CHILD_ADDED","children","length","createTips","addChild","removingChild","resetChildNode","childRemoved","CHILD_REMOVED","removeChild","reorderChild","childReordered","parent","CHILD_REORDER","zIndex","sortAllChildren","changeGroup","groupChanged","node","group","GROUP_CHANGED","i","name","str","sort","a","b","tempObj"],"mappings":"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","sourceRoot":"/","sourcesContent":["const TipsManager = require('TipsManager');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        basicNode: cc.Node,\n        preNode: cc.Node,\n        childNode: cc.Node,\n        tip: cc.Label\n    },\n\n    start () {\n        TipsManager.init();\n    },\n\n    changePosition () {\n        this.resetNode();\n        function positionChanged () {\n            this.tip.string = 'Position_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);\n        this.basicNode.x -= 40;\n        this.basicNode.y += 10;\n        this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);\n    },\n\n    changeScale () {\n        this.resetNode();\n        function scaleChanged () {\n            this.tip.string = 'Scale_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.SCALE_CHANGED, scaleChanged, this);\n        this.basicNode.scaleX += 0.2;\n        this.basicNode.scaleY += 0.2;\n        this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, scaleChanged, this);\n    },\n\n    changeSize () {\n        this.resetNode();\n        // The oldSize only available in editor\n        function sizeChanged (oldSize) {\n            this.tip.string = 'Size_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);\n        this.basicNode.width += 100;\n        this.basicNode.height += 100;\n        this.basicNode.off(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);\n    },\n\n    changeAnchor () {\n        this.resetNode();\n        function anchorChanged () {\n            this.tip.string = 'Anchor_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);\n        this.basicNode.anchorX -= 0.05;\n        this.basicNode.anchorY -= 0.1;\n        this.basicNode.off(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);\n    },\n\n    changeColor () {\n        this.resetNode();\n        function colorChanged () {\n            this.tip.string = 'Color_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);\n        this.basicNode.color = new cc.Color(100, 100, 100);\n        this.basicNode.off(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);\n    },\n\n    addingChild () {\n        function childAdded (child) {\n            this.tip.string = `Add_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(child);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_ADDED, childAdded, this);\n        if (this.preNode.children.length !== 2) {\n            TipsManager.createTips(`Only support when there is 2 stars existing`);\n            return;\n        }\n        this.preNode.addChild(this.childNode);\n        this.preNode.off(cc.Node.EventType.CHILD_ADDED, childAdded, this);\n    },\n\n    removingChild () {\n        this.resetChildNode();\n        function childRemoved (child) {\n            this.tip.string = `Remove_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(child);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);\n        if (this.preNode.children.length !== 3) {\n           TipsManager.createTips(`Only support when there is 3 stars existing`);\n           return;\n        }\n        this.preNode.removeChild(this.childNode);\n        this.preNode.off(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);\n    },\n\n    reorderChild () {\n        this.resetChildNode();\n        function childReordered (parent) {\n            this.tip.string = `Reorder_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(parent);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_REORDER, childReordered, this);\n        this.preNode.children[0].zIndex = 10;\n        this.preNode.sortAllChildren();\n        this.preNode.off(cc.Node.EventType.CHILD_REORDER, childReordered, this);\n    },\n\n    changeGroup () {\n        this.resetNode();\n        function groupChanged (node) {\n            this.tip.string = `Group_changed successd: ${this.basicNode.group}`;\n            console.log(node);\n        }\n        this.basicNode.on(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);\n        this.basicNode.group = 'Collider';\n        this.basicNode.off(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);\n    },\n\n    resetNode () {\n        this.basicNode.x = -200;\n        this.basicNode.y = 75;\n        this.basicNode.scaleX = 1\n        this.basicNode.scaleY = 1;\n        this.basicNode.width = 256;\n        this.basicNode.height = 256;\n        this.basicNode.anchorX = 0.5;\n        this.basicNode.anchorY = 0.5;\n        this.basicNode.color = new cc.Color(255, 255, 255);\n        this.basicNode.group = 'Default';\n    },\n\n    resetChildNode () {\n        let children = this.preNode.children;\n        for (let i = 0; i < children.length; i++) {\n            switch (children[i].name) {\n                case 'star1':\n                    children[i].zIndex = 0;\n                    break;\n                case 'star2':\n                    children[i].zIndex = 1;\n                    break;\n                case 'star3':\n                    children[i].zIndex = 2;\n                    break;\n            }\n        }\n        this.preNode.sortAllChildren();\n    },\n\n    getChildrenContent () {\n        let str = '';\n        let children = this.preNode.children.sort((a, b) => {\n            return a.zIndex - b.zIndex;\n        });\n\n        let tempObj = children[0];\n        for (let i = 0; i < children.length; i++) {\n            let child = children[i];\n            if (child.zIndex > tempObj.zIndex) {\n                tempObj = child;\n            }\n            str += `${child.name} `;\n            child.color = new cc.Color(255, 255, 255);\n        }\n        tempObj.color = new cc.Color(255, 0, 0);\n        return str;\n    }\n});\n"]}