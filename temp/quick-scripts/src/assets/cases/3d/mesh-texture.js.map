{"version":3,"sources":["assets/cases/3d/mesh-texture.js"],"names":["gfx","cc","Class","Component","editor","executeInEditMode","properties","speed","start","vfmt","VertexFormat","name","ATTR_POSITION","type","ATTR_TYPE_FLOAT32","num","ATTR_UV0","mesh","Mesh","init","vertexes","v2","setVertices","setIndices","renderer","node","getComponent","MeshRenderer","addComponent","update","dt","CC_EDITOR","lm","rm","x"],"mappings":"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","sourceRoot":"/","sourcesContent":["let gfx = cc.gfx;\n\ncc.Class({\n    extends: cc.Component,\n    editor: {\n        executeInEditMode: true\n    },\n\n    properties: {\n        speed: 50\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        var vfmt = new gfx.VertexFormat([\n            { name: gfx.ATTR_POSITION, type: gfx.ATTR_TYPE_FLOAT32, num: 2 },\n            { name: gfx.ATTR_UV0, type: gfx.ATTR_TYPE_FLOAT32, num: 2 },\n        ]);\n        \n        let mesh = new cc.Mesh();\n        mesh.init(vfmt, 9, true);\n        this.mesh = mesh;\n        \n        this.vertexes = [\n            cc.v2(-100, 100), cc.v2(0, 100), cc.v2(100, 100),\n            cc.v2(-100, 0), cc.v2(0, 0), cc.v2(100, 0),\n            cc.v2(-100, -100), cc.v2(0, -100), cc.v2(100, -100)\n        ];\n\n        mesh.setVertices(gfx.ATTR_POSITION, this.vertexes);\n\n        mesh.setVertices(gfx.ATTR_UV0, [\n            cc.v2(0,0), cc.v2(0.5,0), cc.v2(1, 0),\n            cc.v2(0,0.5), cc.v2(0.5,0.5), cc.v2(1,0.5),\n            cc.v2(0, 1), cc.v2(0.5, 1), cc.v2(1, 1),\n        ]);\n\n        mesh.setIndices([\n            0, 1, 3, 1, 4, 3,\n            1, 2, 4, 2, 5, 4,\n            3, 4, 6, 4, 7, 6,\n            4, 5, 7, 5, 8, 7\n        ]);\n\n        let renderer = this.node.getComponent(cc.MeshRenderer);\n        if (!renderer) {\n            renderer = this.node.addComponent(cc.MeshRenderer);\n        }\n        renderer.mesh = mesh;\n        this.mesh = mesh;\n    },\n\n    update (dt) {\n        if (CC_EDITOR) return;\n        \n        let lm = this.vertexes[3];\n        let rm = this.vertexes[5];\n        if ((lm.x < -200 && this.speed < 0) || (lm.x > 0 && this.speed > 0)) {\n            this.speed *= -1;\n        }\n        lm.x += dt * this.speed;\n        rm.x += -dt * this.speed;\n\n        this.mesh.setVertices(gfx.ATTR_POSITION, this.vertexes);\n    },\n});\n"]}