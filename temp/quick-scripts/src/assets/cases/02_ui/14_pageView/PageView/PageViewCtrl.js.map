{"version":3,"sources":["assets/cases/02_ui/14_pageView/PageView/PageViewCtrl.js"],"names":["cc","Class","Component","properties","curNum","curTotal","pageTeample","Prefab","target","PageView","label","Label","_createPage","page","instantiate","position","v2","color","Color","r","Math","floor","random","g","b","onLoad","setCurrentPageIndex","update","string","getCurrentPageIndex","onJumpHome","scrollToPage","plusPage","callback","lessPageNum","onAddPage","addPage","onInsertPage","insertPage","onRemovePage","pages","getPages","removePage","length","onRemovePageAtIndex","removePageAtIndex","onRemoveAllPage","removeAllPages","onPageEvent","sender","eventType","EventType","PAGE_TURNING","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        curNum: 3,\n        curTotal: 10,\n        pageTeample: cc.Prefab,\n        target: cc.PageView,\n        label: cc.Label\n    },\n\n    _createPage () {\n        var page = cc.instantiate(this.pageTeample);\n        page.position = new cc.v2(0, 0);\n        var color = new cc.Color();\n        color.r = Math.floor(Math.random() * 255);\n        color.g = Math.floor(Math.random() * 255);\n        color.b = Math.floor(Math.random() * 255);\n        page.color = color;\n        return page;\n    },\n\n    onLoad () {\n        // 设置的当前页面为 1\n        this.target.setCurrentPageIndex(0);\n    },\n\n    update () {\n        // 当前页面索引\n        this.label.string = \"第\" + (this.target.getCurrentPageIndex() + 1) + \"页\";\n    },\n\n    // 返回首页\n    onJumpHome () {\n        // 第二个参数为滚动所需时间，默认值为 0.3 秒\n        this.target.scrollToPage(0);\n    },\n\n    // 添加页面\n    plusPage (callback) {\n        if (this.curNum > this.curTotal) {\n            return;\n        }\n        this.curNum++;\n        if (callback) {\n            callback();\n        }\n    },\n\n    // 减少页面\n    lessPageNum (callback) {\n        if (this.curNum <= 0) {\n            return;\n        }\n        this.curNum--;\n        if (callback) {\n            callback();\n        }\n    },\n\n    // 添加页面\n    onAddPage () {\n        this.plusPage(() => {\n            this.target.addPage(this._createPage());\n        });\n    },\n\n    // 插入当前页面\n    onInsertPage () {\n        this.plusPage(() => {\n            this.target.insertPage(this._createPage(), this.target.getCurrentPageIndex());\n        });\n    },\n\n    // 移除最后一个页面\n    onRemovePage () {\n        this.lessPageNum(() => {\n            var pages = this.target.getPages();\n            this.target.removePage(pages[pages.length - 1]);\n        });\n    },\n\n    // 移除当前页面\n    onRemovePageAtIndex () {\n        this.lessPageNum(() => {\n            this.target.removePageAtIndex(this.target.getCurrentPageIndex());\n        });\n    },\n\n    // 移除所有页面\n    onRemoveAllPage () {\n        this.target.removeAllPages();\n        this.curNum = 0;\n    },\n\n    // 监听事件\n    onPageEvent (sender, eventType) {\n        // 翻页事件\n        if (eventType !== cc.PageView.EventType.PAGE_TURNING) {\n            return;\n        }\n        console.log(\"当前所在的页面索引:\" + sender.getCurrentPageIndex());\n    }\n});\n"]}