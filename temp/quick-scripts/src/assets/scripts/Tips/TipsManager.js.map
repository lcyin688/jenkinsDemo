{"version":3,"sources":["assets/scripts/Tips/TipsManager.js"],"names":["isAndroid","cc","sys","platform","ANDROID","isNative","isNativeWindows","os","OS_WINDOWS","isNativeMacOS","OS_OSX","isBrowser","isMobile","isIphone","IPHONE","isDesktopBrowser","DESKTOP_BROWSER","isWechat","WECHAT_GAME","isQQPlay","QQ_PLAY","isBaidu","BAIDU_GAME","isVivo","VIVO_GAME","isOPPO","OPPO_GAME","isXiaomi","XIAOMI_GAME","isHuawei","HUAWEI_GAME","isJkw","JKW_GAME","isAlipay","ALIPAY_GAME","module","exports","tispPrefab","SupportConfig","name","console","log","capabilities","CC_RUNTIME","game","renderType","RENDER_TYPE_WEBGL","init","tipsPrefab","resources","load","err","prefab","createTips","content","node","instantiate","tipsCtrl","getComponent","setContent","parent","director","getScene","hasSupport","hideTip","support","undefined"],"mappings":"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","sourceRoot":"/","sourcesContent":["//\n// Restricted the scenes platform permissions\n//\n\n// init platform info\nconst isAndroid = cc.sys.platform === cc.sys.ANDROID;\nconst isNative = cc.sys.isNative;\nconst isNativeWindows = isNative && cc.sys.os === cc.sys.OS_WINDOWS;\nconst isNativeMacOS = isNative && cc.sys.os === cc.sys.OS_OSX;\nconst isBrowser = cc.sys.isBrowser;\nconst isMobile = cc.sys.isMobile;\nconst isIphone = cc.sys.platform === cc.sys.IPHONE;\nconst isDesktopBrowser = cc.sys.platform === cc.sys.DESKTOP_BROWSER;\n\nconst isWechat = cc.sys.platform === cc.sys.WECHAT_GAME;\nconst isQQPlay = cc.sys.platform === cc.sys.QQ_PLAY;\nconst isBaidu = cc.sys.platform === cc.sys.BAIDU_GAME;\nconst isVivo = cc.sys.platform === cc.sys.VIVO_GAME;\nconst isOPPO = cc.sys.platform === cc.sys.OPPO_GAME;\nconst isXiaomi = cc.sys.platform === cc.sys.XIAOMI_GAME;\nconst isHuawei = cc.sys.platform === cc.sys.HUAWEI_GAME;\nconst isJkw = cc.sys.platform === cc.sys.JKW_GAME;\nconst isAlipay = cc.sys.platform === cc.sys.ALIPAY_GAME;\n \nmodule.exports = {\n    tispPrefab: null,\n\n    SupportConfig: function (name) {\n        console.log(name);\n        switch (name) {\n            case 'downloader-web':      return !isNative;\n            case 'EditBoxTabIndex':     return !isNative && !isAlipay;\n            case 'EditBox':\n            case 'EditBoxEvent':        return !isAlipay;\n            case 'OnMultiTouchInput':   return isMobile;\n            case 'webp-test':           return cc.sys.capabilities['webp'];\n            case 'DeviceMotion':        return isMobile && !isQQPlay && !isVivo;\n            case 'Native_Call':         return isMobile && (isAndroid || isIphone) && !CC_RUNTIME;\n            case 'TTFFontLabel':        return !isQQPlay;\n            case 'MousePropagation':    return ((isNative && !isMobile && !isWechat && !isQQPlay && !isXiaomi && !isHuawei && !isAlipay) || isDesktopBrowser);\n            case 'downloader-native':\n                return isNative && !CC_RUNTIME;\n            // Not support the VIVO_GAME and OPPO_GAME\n            case 'capture_to_native':\n                return isNative && !isVivo && !isOPPO;\n            case 'SafeArea':\n                return (isIphone || isAndroid) && isNative;\n            case 'capture_to_wechat':\n                return  isWechat;\n            case 'capture_to_web':\n            case 'ShadowLabel':\n            case 'videoPlayer-stayOnBottom':\n                return isBrowser;\n\n            // Only support the RENDER_TYPE_WEBGL\n            case 'MotionStreak':\n            case 'Mask_IMAGE_STENCIL':\n            case 'Mask_NESTED':\n                return cc.game.renderType === cc.game.RENDER_TYPE_WEBGL;\n\n            // Not support isMobile\n            case 'KeyboardInput':\n            case 'platform':\n                return !isMobile && !isBaidu && !isXiaomi && !isHuawei && !isAlipay;\n\n            // Not support the Simulator, QQ_PLAY, WECHAT_GAME\n            case 'videoPlayer':\n                return !isNativeWindows && !isNativeMacOS && !CC_RUNTIME && !isQQPlay && !isBaidu && !isXiaomi && !isHuawei && !isAlipay;\n\n            // Not support the VIVO_GAME, OPPO_GAME, WECHAT_GAME, QQ_PLAY, CC_RUNTIME\n            case 'webview':\n                return (isMobile || isBrowser) && !CC_RUNTIME && !isQQPlay && !isWechat && !isBaidu && !isXiaomi && !isHuawei && !isAlipay;\n            case 'mesh':\n                return !isVivo && !isOPPO;\n        }\n    },\n\n    init () {\n        if (this.tipsPrefab) return;\n\n        cc.resources.load('tips/Tips', (err, prefab) => {\n            this.tipsPrefab = prefab;\n        });\n    },\n\n    createTips (content) {\n        let node = cc.instantiate(this.tipsPrefab);\n        let tipsCtrl = node.getComponent('TipsCtrl');\n        if (content) {\n            tipsCtrl.setContent(content);\n        }\n        node.parent = cc.director.getScene();\n    },\n\n    hasSupport (name, hideTip) {\n        let support = this.SupportConfig(name);\n        if (!support && support !== undefined) {\n            if (!hideTip) {\n                this.createTips();\n            }\n            return false;\n        }\n        return true;\n    }\n};"]}