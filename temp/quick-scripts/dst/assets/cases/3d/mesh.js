
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/cases/3d/mesh.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '85b7cwUbltFwab1+S5HCilZ', 'mesh');
// cases/3d/mesh.js

"use strict";

var chroma = require('chroma');

var gfx = cc.gfx;
cc.Class({
  "extends": cc.Component,
  editor: {
    executeInEditMode: true
  },
  properties: {},
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {
    this.lighten = 0;
    this.lightenDirection = 1;
    this.c1 = cc.color();
    this.c2 = cc.color();
    var vfmtPosColor = new gfx.VertexFormat([{
      name: gfx.ATTR_POSITION,
      type: gfx.ATTR_TYPE_FLOAT32,
      num: 3
    }, {
      name: gfx.ATTR_COLOR,
      type: gfx.ATTR_TYPE_UINT8,
      num: 4,
      normalize: true
    }]);
    var mesh = new cc.Mesh();
    mesh.init(vfmtPosColor, 8, true);
    this.mesh = mesh;
    mesh.setVertices(gfx.ATTR_POSITION, [cc.v3(-100, 100, 100), cc.v3(-100, -100, 100), cc.v3(100, 100, 100), cc.v3(100, -100, 100), cc.v3(-100, 100, -100), cc.v3(-100, -100, -100), cc.v3(100, 100, -100), cc.v3(100, -100, -100)]);
    mesh._minPos = cc.v3(-100, -100, -100);
    mesh._maxPos = cc.v3(100, 100, 100);
    this.updateColor(cc.Color.RED, cc.Color.BLUE);
    mesh.setIndices([0, 1, 2, 1, 3, 2, // front
    0, 6, 4, 0, 2, 6, // top
    2, 7, 6, 2, 3, 7, // right
    0, 5, 4, 0, 1, 5, // left
    1, 7, 5, 1, 3, 7, // bottm,
    4, 5, 6, 5, 7, 6 // back
    ]);
    var renderer = this.node.getComponent(cc.MeshRenderer);

    if (!renderer) {
      renderer = this.node.addComponent(cc.MeshRenderer);
    }

    renderer.mesh = mesh;
  },
  updateColor: function updateColor(c1, c2) {
    this.mesh.setVertices(gfx.ATTR_COLOR, [c1, c1, c1, c1, c2, c2, c2, c2]);
  },
  update: function update(dt) {
    if (CC_EDITOR) return;
    var c1 = chroma.hsl(330, 1, this.lighten);
    var c2 = chroma.hsl(100, 1, 1 - this.lighten);
    this.lighten += dt * 0.1 * this.lightenDirection;

    if (this.lighten > 1 && this.lightenDirection > 0 || this.lighten < 0 && this.lightenDirection < 0) {
      this.lightenDirection *= -1;
    }

    this.c1.fromHEX(c1.toString());
    this.c2.fromHEX(c2.toString());
    this.updateColor(this.c1, this.c2);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9jYXNlcy8zZC9tZXNoLmpzIl0sIm5hbWVzIjpbImNocm9tYSIsInJlcXVpcmUiLCJnZngiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwiZWRpdG9yIiwiZXhlY3V0ZUluRWRpdE1vZGUiLCJwcm9wZXJ0aWVzIiwic3RhcnQiLCJsaWdodGVuIiwibGlnaHRlbkRpcmVjdGlvbiIsImMxIiwiY29sb3IiLCJjMiIsInZmbXRQb3NDb2xvciIsIlZlcnRleEZvcm1hdCIsIm5hbWUiLCJBVFRSX1BPU0lUSU9OIiwidHlwZSIsIkFUVFJfVFlQRV9GTE9BVDMyIiwibnVtIiwiQVRUUl9DT0xPUiIsIkFUVFJfVFlQRV9VSU5UOCIsIm5vcm1hbGl6ZSIsIm1lc2giLCJNZXNoIiwiaW5pdCIsInNldFZlcnRpY2VzIiwidjMiLCJfbWluUG9zIiwiX21heFBvcyIsInVwZGF0ZUNvbG9yIiwiQ29sb3IiLCJSRUQiLCJCTFVFIiwic2V0SW5kaWNlcyIsInJlbmRlcmVyIiwibm9kZSIsImdldENvbXBvbmVudCIsIk1lc2hSZW5kZXJlciIsImFkZENvbXBvbmVudCIsInVwZGF0ZSIsImR0IiwiQ0NfRURJVE9SIiwiaHNsIiwiZnJvbUhFWCIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBRUEsSUFBSUMsR0FBRyxHQUFHQyxFQUFFLENBQUNELEdBQWI7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFHTEMsTUFBTSxFQUFFO0lBQ0pDLGlCQUFpQixFQUFFO0VBRGYsQ0FISDtFQU9MQyxVQUFVLEVBQUUsRUFQUDtFQVVMO0VBRUE7RUFFQUMsS0FkSyxtQkFjSTtJQUNMLEtBQUtDLE9BQUwsR0FBZSxDQUFmO0lBQ0EsS0FBS0MsZ0JBQUwsR0FBd0IsQ0FBeEI7SUFDQSxLQUFLQyxFQUFMLEdBQVVULEVBQUUs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Q0FBQyxDQUExQjtJQUNIOztJQUVELEtBQUtDLEVBQUwsQ0FBUWtDLE9BQVIsQ0FBZ0JsQyxFQUFFLENBQUNtQyxRQUFILEVBQWhCO0lBQ0EsS0FBS2pDLEVBQUwsQ0FBUWdDLE9BQVIsQ0FBZ0JoQyxFQUFFLENBQUNpQyxRQUFILEVBQWhCO0lBQ0EsS0FBS2YsV0FBTCxDQUFpQixLQUFLcEIsRUFBdEIsRUFBMEIsS0FBS0UsRUFBL0I7RUFDSDtBQTdFSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjaHJvbWEgPSByZXF1aXJlKCdjaHJvbWEnKTtcblxubGV0IGdmeCA9IGNjLmdmeDtcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIGVkaXRvcjoge1xuICAgICAgICBleGVjdXRlSW5FZGl0TW9kZTogdHJ1ZVxuICAgIH0sXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgfSxcblxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxuXG4gICAgLy8gb25Mb2FkICgpIHt9LFxuXG4gICAgc3RhcnQgKCkge1xuICAgICAgICB0aGlzLmxpZ2h0ZW4gPSAwO1xuICAgICAgICB0aGlzLmxpZ2h0ZW5EaXJlY3Rpb24gPSAxO1xuICAgICAgICB0aGlzLmMxID0gY2MuY29sb3IoKTtcbiAgICAgICAgdGhpcy5jMiA9IGNjLmNvbG9yKCk7XG5cbiAgICAgICAgdmFyIHZmbXRQb3NDb2xvciA9IG5ldyBnZnguVmVydGV4Rm9ybWF0KFtcbiAgICAgICAgICAgIHsgbmFtZTogZ2Z4LkFUVFJfUE9TSVRJT04sIHR5cGU6IGdmeC5BVFRSX1RZUEVfRkxPQVQzMiwgbnVtOiAzIH0sXG4gICAgICAgICAgICB7IG5hbWU6IGdmeC5BVFRSX0NPTE9SLCB0eXBlOiBnZnguQVRUUl9UWVBFX1VJTlQ4LCBudW06IDQsIG5vcm1hbGl6ZTogdHJ1ZSB9LFxuICAgICAgICBdKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBtZXNoID0gbmV3IGNjLk1lc2goKTtcbiAgICAgICAgbWVzaC5pbml0KHZmbXRQb3NDb2xvciwgOCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubWVzaCA9IG1lc2g7XG4gICAgICAgIFxuICAgICAgICBtZXNoLnNldFZlcnRpY2VzKGdmeC5BVFRSX1BPU0lUSU9OLCBbXG4gICAgICAgICAgICBjYy52MygtMTAwLCAxMDAsIDEwMCksIGNjLnYzKC0xMDAsIC0xMDAsIDEwMCksIGNjLnYzKDEwMCwgMTAwLCAxMDApLCBjYy52MygxMDAsIC0xMDAsIDEwMCksXG4gICAgICAgICAgICBjYy52MygtMTAwLCAxMDAsIC0xMDApLCBjYy52MygtMTAwLCAtMTAwLCAtMTAwKSwgY2MudjMoMTAwLCAxMDAsIC0xMDApLCBjYy52MygxMDAsIC0xMDAsIC0xMDApXG4gICAgICAgIF0pO1xuXG4gICAgICAgIG1lc2guX21pblBvcyA9IGNjLnYzKC0xMDAsIC0xMDAsIC0xMDApO1xuICAgICAgICBtZXNoLl9tYXhQb3MgPSBjYy52MygxMDAsIDEwMCwgMTAwKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUNvbG9yKGNjLkNvbG9yLlJFRCwgY2MuQ29sb3IuQkxVRSk7XG5cbiAgICAgICAgbWVzaC5zZXRJbmRpY2VzKFtcbiAgICAgICAgICAgIDAsIDEsIDIsIDEsIDMsIDIsIC8vIGZyb250XG4gICAgICAgICAgICAwLCA2LCA0LCAwLCAyLCA2LCAvLyB0b3BcbiAgICAgICAgICAgIDIsIDcsIDYsIDIsIDMsIDcsIC8vIHJpZ2h0XG4gICAgICAgICAgICAwLCA1LCA0LCAwLCAxLCA1LCAvLyBsZWZ0XG4gICAgICAgICAgICAxLCA3LCA1LCAxLCAzLCA3LCAvLyBib3R0bSxcbiAgICAgICAgICAgIDQsIDUsIDYsIDUsIDcsIDYsIC8vIGJhY2tcbiAgICAgICAgXSk7XG5cbiAgICAgICAgbGV0IHJlbmRlcmVyID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5NZXNoUmVuZGVyZXIpO1xuICAgICAgICBpZiAoIXJlbmRlcmVyKSB7XG4gICAgICAgICAgICByZW5kZXJlciA9IHRoaXMubm9kZS5hZGRDb21wb25lbnQoY2MuTWVzaFJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJlci5tZXNoID0gbWVzaDtcbiAgICB9LFxuXG4gICAgdXBkYXRlQ29sb3IgKGMxLCBjMikge1xuICAgICAgICB0aGlzLm1lc2guc2V0VmVydGljZXMoZ2Z4LkFUVFJfQ09MT1IsIFtcbiAgICAgICAgICAgIGMxLCBjMSwgYzEsIGMxLFxuICAgICAgICAgICAgYzIsIGMyLCBjMiwgYzIsXG4gICAgICAgIF0pO1xuICAgIH0sXG5cbiAgICB1cGRhdGUgKGR0KSB7XG4gICAgICAgIGlmIChDQ19FRElUT1IpIHJldHVybjtcblxuICAgICAgICBsZXQgYzEgPSBjaHJvbWEuaHNsKDMzMCwgMSwgdGhpcy5saWdodGVuKTtcbiAgICAgICAgbGV0IGMyID0gY2hyb21hLmhzbCgxMDAsIDEsICgxLXRoaXMubGlnaHRlbikpO1xuXG4gICAgICAgIHRoaXMubGlnaHRlbiArPSBkdCAqIDAuMSAqIHRoaXMubGlnaHRlbkRpcmVjdGlvbjtcbiAgICAgICAgaWYgKCh0aGlzLmxpZ2h0ZW4gPiAxICYmIHRoaXMubGlnaHRlbkRpcmVjdGlvbiA+IDApIHx8IFxuICAgICAgICAgICAgKHRoaXMubGlnaHRlbiA8IDAgJiYgdGhpcy5saWdodGVuRGlyZWN0aW9uIDwgMCkpIHtcbiAgICAgICAgICAgIHRoaXMubGlnaHRlbkRpcmVjdGlvbiAqPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jMS5mcm9tSEVYKGMxLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmMyLmZyb21IRVgoYzIudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29sb3IodGhpcy5jMSwgdGhpcy5jMik7XG4gICAgfSxcbn0pO1xuIl19