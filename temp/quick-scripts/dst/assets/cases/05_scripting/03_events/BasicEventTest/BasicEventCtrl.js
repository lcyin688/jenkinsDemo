
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/cases/05_scripting/03_events/BasicEventTest/BasicEventCtrl.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '72ce1xP/UlG/rNZB/cIXQ2q', 'BasicEventCtrl');
// cases/05_scripting/03_events/BasicEventTest/BasicEventCtrl.js

"use strict";

var TipsManager = require('TipsManager');

cc.Class({
  "extends": cc.Component,
  properties: {
    basicNode: cc.Node,
    preNode: cc.Node,
    childNode: cc.Node,
    tip: cc.Label
  },
  start: function start() {
    TipsManager.init();
  },
  changePosition: function changePosition() {
    this.resetNode();

    function positionChanged() {
      this.tip.string = 'Position_changed successd';
    }

    this.basicNode.on(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);
    this.basicNode.x -= 40;
    this.basicNode.y += 10;
    this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);
  },
  changeScale: function changeScale() {
    this.resetNode();

    function scaleChanged() {
      this.tip.string = 'Scale_changed successd';
    }

    this.basicNode.on(cc.Node.EventType.SCALE_CHANGED, scaleChanged, this);
    this.basicNode.scaleX += 0.2;
    this.basicNode.scaleY += 0.2;
    this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, scaleChanged, this);
  },
  changeSize: function changeSize() {
    this.resetNode(); // The oldSize only available in editor

    function sizeChanged(oldSize) {
      this.tip.string = 'Size_changed successd';
    }

    this.basicNode.on(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);
    this.basicNode.width += 100;
    this.basicNode.height += 100;
    this.basicNode.off(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);
  },
  changeAnchor: function changeAnchor() {
    this.resetNode();

    function anchorChanged() {
      this.tip.string = 'Anchor_changed successd';
    }

    this.basicNode.on(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);
    this.basicNode.anchorX -= 0.05;
    this.basicNode.anchorY -= 0.1;
    this.basicNode.off(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);
  },
  changeColor: function changeColor() {
    this.resetNode();

    function colorChanged() {
      this.tip.string = 'Color_changed successd';
    }

    this.basicNode.on(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);
    this.basicNode.color = new cc.Color(100, 100, 100);
    this.basicNode.off(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);
  },
  addingChild: function addingChild() {
    function childAdded(child) {
      this.tip.string = "Add_child successd\n zIndex order: " + this.getChildrenContent();
      console.log(child);
    }

    this.preNode.on(cc.Node.EventType.CHILD_ADDED, childAdded, this);

    if (this.preNode.children.length !== 2) {
      TipsManager.createTips("Only support when there is 2 stars existing");
      return;
    }

    this.preNode.addChild(this.childNode);
    this.preNode.off(cc.Node.EventType.CHILD_ADDED, childAdded, this);
  },
  removingChild: function removingChild() {
    this.resetChildNode();

    function childRemoved(child) {
      this.tip.string = "Remove_child successd\n zIndex order: " + this.getChildrenContent();
      console.log(child);
    }

    this.preNode.on(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);

    if (this.preNode.children.length !== 3) {
      TipsManager.createTips("Only support when there is 3 stars existing");
      return;
    }

    this.preNode.removeChild(this.childNode);
    this.preNode.off(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);
  },
  reorderChild: function reorderChild() {
    this.resetChildNode();

    function childReordered(parent) {
      this.tip.string = "Reorder_child successd\n zIndex order: " + this.getChildrenContent();
      console.log(parent);
    }

    this.preNode.on(cc.Node.EventType.CHILD_REORDER, childReordered, this);
    this.preNode.children[0].zIndex = 10;
    this.preNode.sortAllChildren();
    this.preNode.off(cc.Node.EventType.CHILD_REORDER, childReordered, this);
  },
  changeGroup: function changeGroup() {
    this.resetNode();

    function groupChanged(node) {
      this.tip.string = "Group_changed successd: " + this.basicNode.group;
      console.log(node);
    }

    this.basicNode.on(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);
    this.basicNode.group = 'Collider';
    this.basicNode.off(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);
  },
  resetNode: function resetNode() {
    this.basicNode.x = -200;
    this.basicNode.y = 75;
    this.basicNode.scaleX = 1;
    this.basicNode.scaleY = 1;
    this.basicNode.width = 256;
    this.basicNode.height = 256;
    this.basicNode.anchorX = 0.5;
    this.basicNode.anchorY = 0.5;
    this.basicNode.color = new cc.Color(255, 255, 255);
    this.basicNode.group = 'Default';
  },
  resetChildNode: function resetChildNode() {
    var children = this.preNode.children;

    for (var i = 0; i < children.length; i++) {
      switch (children[i].name) {
        case 'star1':
          children[i].zIndex = 0;
          break;

        case 'star2':
          children[i].zIndex = 1;
          break;

        case 'star3':
          children[i].zIndex = 2;
          break;
      }
    }

    this.preNode.sortAllChildren();
  },
  getChildrenContent: function getChildrenContent() {
    var str = '';
    var children = this.preNode.children.sort(function (a, b) {
      return a.zIndex - b.zIndex;
    });
    var tempObj = children[0];

    for (var i = 0; i < children.length; i++) {
      var child = children[i];

      if (child.zIndex > tempObj.zIndex) {
        tempObj = child;
      }

      str += child.name + " ";
      child.color = new cc.Color(255, 255, 255);
    }

    tempObj.color = new cc.Color(255, 0, 0);
    return str;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9jYXNlcy8wNV9zY3JpcHRpbmcvMDNfZXZlbnRzL0Jhc2ljRXZlbnRUZXN0L0Jhc2ljRXZlbnRDdHJsLmpzIl0sIm5hbWVzIjpbIlRpcHNNYW5hZ2VyIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiYmFzaWNOb2RlIiwiTm9kZSIsInByZU5vZGUiLCJjaGlsZE5vZGUiLCJ0aXAiLCJMYWJlbCIsInN0YXJ0IiwiaW5pdCIsImNoYW5nZVBvc2l0aW9uIiwicmVzZXROb2RlIiwicG9zaXRpb25DaGFuZ2VkIiwic3RyaW5nIiwib24iLCJFdmVudFR5cGUiLCJQT1NJVElPTl9DSEFOR0VEIiwieCIsInkiLCJvZmYiLCJjaGFuZ2VTY2FsZSIsInNjYWxlQ2hhbmdlZCIsIlNDQUxFX0NIQU5HRUQiLCJzY2FsZVgiLCJzY2FsZVkiLCJjaGFuZ2VTaXplIiwic2l6ZUNoYW5nZWQiLCJvbGRTaXplIiwiU0laRV9DSEFOR0VEIiwid2lkdGgiLCJoZWlnaHQiLCJjaGFuZ2VBbmNob3IiLCJhbmNob3JDaGFuZ2VkIiwiQU5DSE9SX0NIQU5HRUQiLCJhbmNob3JYIiwiYW5jaG9yWSIsImNoYW5nZUNvbG9yIiwiY29sb3JDaGFuZ2VkIiwiQ09MT1JfQ0hBTkdFRCIsImNvbG9yIiwiQ29sb3IiLCJhZGRpbmdDaGlsZCIsImNoaWxkQWRkZWQiLCJjaGlsZCIsImdldENoaWxkcmVuQ29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJDSElMRF9BRERFRCIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY3JlYXRlVGlwcyIsImFkZENoaWxkIiwicmVtb3ZpbmdDaGlsZCIsInJlc2V0Q2hpbGROb2RlIiwiY2hpbGRSZW1vdmVkIiwiQ0hJTERfUkVNT1ZFRCIsInJlbW92ZUNoaWxkIiwicmVvcmRlckNoaWxkIiwiY2hpbGRSZW9yZGVyZWQiLCJwYXJlbnQiLCJDSElMRF9SRU9SREVSIiwiekluZGV4Iiwic29ydEFsbENoaWxkcmVuIiwiY2hhbmdlR3JvdXAiLCJncm91cENoYW5nZWQiLCJub2RlIiwiZ3JvdXAiLCJHUk9VUF9DSEFOR0VEIiwiaSIsIm5hbWUiLCJzdHIiLCJzb3J0IiwiYSIsImIiLCJ0ZW1wT2JqIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGFBQUQsQ0FBM0I7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0VBQ0wsV0FBU0QsRUFBRSxDQUFDRSxTQURQO0VBR0xDLFVBQVUsRUFBRTtJQUNSQyxTQUFTLEVBQUVKLEVBQUUsQ0FBQ0ssSUFETjtJQUVSQyxPQUFPLEVBQUVOLEVBQUUsQ0FBQ0ssSUFGSjtJQUdSRSxTQUFTLEVBQUVQLEVBQUUsQ0FBQ0ssSUFITjtJQUlSRyxHQUFHLEVBQUVSLEVBQUUsQ0FBQ1M7RUFKQSxDQUhQO0VBVUxDLEtBVkssbUJBVUk7SUFDTFosV0FBVyxDQUFDYSxJQUFaO0VBQ0gsQ0FaSTtFQWNMQyxjQWRLLDRCQWNhO0lBQ2QsS0FBS0MsU0FBTDs7SUFDQSxTQUFTQyxlQUFULEdBQTRCO01BQ3hCLEtBQUtOLEdBQUwsQ0FBU08sTUFBVCxHQUFrQiwyQkFBbEI7SUFDSDs7SUFDRCxLQUFLWCxTQUFMLENBQWVZLEVBQWYsQ0FBa0JoQixFQUFFLENBQUNLLElBQUgsQ0FBUVksU0FBUixDQUFrQkMsZ0JBQXBDLEVBQXNESixlQUF0RCxFQUF1RSxJQUF2RTtJQUNBLEtBQUtWLFNBQUwsQ0FBZWUsQ0FBZixJQUFvQixFQUFwQjtJQUNBLEtBQUtmLFNBQUwsQ0FBZWdCLENBQWYsSUFBb0IsRUFBcEI7SUFDQSxLQUFLaEIsU0FBTCxDQUFlaUIsR0FBZixDQUFtQnJCLEVBQUUsQ0FBQ0ssSUFBSCxDQUFRWSxTQUFSLENBQWtCQyxnQkFBckMsRUFBdURKLGVBQXZELEVBQXdFLElBQXhFO0VBQ0gsQ0F2Qkk7RUF5QkxRLFdBekJLLHlCQXlCVTtJQUNYLEtBQUtULFNBQUw7O0lBQ0EsU0FBU1UsWUFBVCxHQUF5QjtNQUNyQixLQUFLZixHQUFM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SCxDQXRKSTtFQXdKTGxCLGtCQXhKSyxnQ0F3SmlCO0lBQ2xCLElBQUkwQixHQUFHLEdBQUcsRUFBVjtJQUNBLElBQUl0QixRQUFRLEdBQUcsS0FBSzVDLE9BQUwsQ0FBYTRDLFFBQWIsQ0FBc0J1QixJQUF0QixDQUEyQixVQUFDQyxDQUFELEVBQUlDLENBQUosRUFBVTtNQUNoRCxPQUFPRCxDQUFDLENBQUNYLE1BQUYsR0FBV1ksQ0FBQyxDQUFDWixNQUFwQjtJQUNILENBRmMsQ0FBZjtJQUlBLElBQUlhLE9BQU8sR0FBRzFCLFFBQVEsQ0FBQyxDQUFELENBQXRCOztJQUNBLEtBQUssSUFBSW9CLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdwQixRQUFRLENBQUNDLE1BQTdCLEVBQXFDbUIsQ0FBQyxFQUF0QyxFQUEwQztNQUN0QyxJQUFJekIsS0FBSyxHQUFHSyxRQUFRLENBQUNvQixDQUFELENBQXBCOztNQUNBLElBQUl6QixLQUFLLENBQUNrQixNQUFOLEdBQWVhLE9BQU8sQ0FBQ2IsTUFBM0IsRUFBbUM7UUFDL0JhLE9BQU8sR0FBRy9CLEtBQVY7TUFDSDs7TUFDRDJCLEdBQUcsSUFBTzNCLEtBQUssQ0FBQzBCLElBQWIsTUFBSDtNQUNBMUIsS0FBSyxDQUFDSixLQUFOLEdBQWMsSUFBSXpDLEVBQUUsQ0FBQzBDLEtBQVAsQ0FBYSxHQUFiLEVBQWtCLEdBQWxCLEVBQXVCLEdBQXZCLENBQWQ7SUFDSDs7SUFDRGtDLE9BQU8sQ0FBQ25DLEtBQVIsR0FBZ0IsSUFBSXpDLEVBQUUsQ0FBQzBDLEtBQVAsQ0FBYSxHQUFiLEVBQWtCLENBQWxCLEVBQXFCLENBQXJCLENBQWhCO0lBQ0EsT0FBTzhCLEdBQVA7RUFDSDtBQXpLSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUaXBzTWFuYWdlciA9IHJlcXVpcmUoJ1RpcHNNYW5hZ2VyJyk7XG5cbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGJhc2ljTm9kZTogY2MuTm9kZSxcbiAgICAgICAgcHJlTm9kZTogY2MuTm9kZSxcbiAgICAgICAgY2hpbGROb2RlOiBjYy5Ob2RlLFxuICAgICAgICB0aXA6IGNjLkxhYmVsXG4gICAgfSxcblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICAgVGlwc01hbmFnZXIuaW5pdCgpO1xuICAgIH0sXG5cbiAgICBjaGFuZ2VQb3NpdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVzZXROb2RlKCk7XG4gICAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2hhbmdlZCAoKSB7XG4gICAgICAgICAgICB0aGlzLnRpcC5zdHJpbmcgPSAnUG9zaXRpb25fY2hhbmdlZCBzdWNjZXNzZCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNpY05vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuUE9TSVRJT05fQ0hBTkdFRCwgcG9zaXRpb25DaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUueCAtPSA0MDtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUueSArPSAxMDtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlBPU0lUSU9OX0NIQU5HRUQsIHBvc2l0aW9uQ2hhbmdlZCwgdGhpcyk7XG4gICAgfSxcblxuICAgIGNoYW5nZVNjYWxlICgpIHtcbiAgICAgICAgdGhpcy5yZXNldE5vZGUoKTtcbiAgICAgICAgZnVuY3Rpb24gc2NhbGVDaGFuZ2VkICgpIHtcbiAgICAgICAgICAgIHRoaXMudGlwLnN0cmluZyA9ICdTY2FsZV9jaGFuZ2VkIHN1Y2Nlc3NkJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhc2ljTm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5TQ0FMRV9DSEFOR0VELCBzY2FsZUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS5zY2FsZVggKz0gMC4yO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS5zY2FsZVkgKz0gMC4yO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS5vZmYoY2MuTm9kZS5FdmVudFR5cGUuUE9TSVRJT05fQ0hBTkdFRCwgc2NhbGVDaGFuZ2VkLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgY2hhbmdlU2l6ZSAoKSB7XG4gICAgICAgIHRoaXMucmVzZXROb2RlKCk7XG4gICAgICAgIC8vIFRoZSBvbGRTaXplIG9ubHkgYXZhaWxhYmxlIGluIGVkaXRvclxuICAgICAgICBmdW5jdGlvbiBzaXplQ2hhbmdlZCAob2xkU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy50aXAuc3RyaW5nID0gJ1NpemVfY2hhbmdlZCBzdWNjZXNzZCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNpY05vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuU0laRV9DSEFOR0VELCBzaXplQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLndpZHRoICs9IDEwMDtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuaGVpZ2h0ICs9IDEwMDtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlNJWkVfQ0hBTkdFRCwgc2l6ZUNoYW5nZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICBjaGFuZ2VBbmNob3IgKCkge1xuICAgICAgICB0aGlzLnJlc2V0Tm9kZSgpO1xuICAgICAgICBmdW5jdGlvbiBhbmNob3JDaGFuZ2VkICgpIHtcbiAgICAgICAgICAgIHRoaXMudGlwLnN0cmluZyA9ICdBbmNob3JfY2hhbmdlZCBzdWNjZXNzZCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNpY05vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuQU5DSE9SX0NIQU5HRUQsIGFuY2hvckNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS5hbmNob3JYIC09IDAuMDU7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLmFuY2hvclkgLT0gMC4xO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS5vZmYoY2MuTm9kZS5FdmVudFR5cGUuQU5DSE9SX0NIQU5HRUQsIGFuY2hvckNoYW5nZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICBjaGFuZ2VDb2xvciAoKSB7XG4gICAgICAgIHRoaXMucmVzZXROb2RlKCk7XG4gICAgICAgIGZ1bmN0aW9uIGNvbG9yQ2hhbmdlZCAoKSB7XG4gICAgICAgICAgICB0aGlzLnRpcC5zdHJpbmcgPSAnQ29sb3JfY2hhbmdlZCBzdWNjZXNzZCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNpY05vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuQ09MT1JfQ0hBTkdFRCwgY29sb3JDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuY29sb3IgPSBuZXcgY2MuQ29sb3IoMTAwLCAxMDAsIDEwMCk7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5DT0xPUl9DSEFOR0VELCBjb2xvckNoYW5nZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICBhZGRpbmdDaGlsZCAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNoaWxkQWRkZWQgKGNoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLnRpcC5zdHJpbmcgPSBgQWRkX2NoaWxkIHN1Y2Nlc3NkXFxuIHpJbmRleCBvcmRlcjogJHt0aGlzLmdldENoaWxkcmVuQ29udGVudCgpfWA7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVOb2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLkNISUxEX0FEREVELCBjaGlsZEFkZGVkLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMucHJlTm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgIFRpcHNNYW5hZ2VyLmNyZWF0ZVRpcHMoYE9ubHkgc3VwcG9ydCB3aGVuIHRoZXJlIGlzIDIgc3RhcnMgZXhpc3RpbmdgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZU5vZGUuYWRkQ2hpbGQodGhpcy5jaGlsZE5vZGUpO1xuICAgICAgICB0aGlzLnByZU5vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLkNISUxEX0FEREVELCBjaGlsZEFkZGVkLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgcmVtb3ZpbmdDaGlsZCAoKSB7XG4gICAgICAgIHRoaXMucmVzZXRDaGlsZE5vZGUoKTtcbiAgICAgICAgZnVuY3Rpb24gY2hpbGRSZW1vdmVkIChjaGlsZCkge1xuICAgICAgICAgICAgdGhpcy50aXAuc3RyaW5nID0gYFJlbW92ZV9jaGlsZCBzdWNjZXNzZFxcbiB6SW5kZXggb3JkZXI6ICR7dGhpcy5nZXRDaGlsZHJlbkNvbnRlbnQoKX1gO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlTm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5DSElMRF9SRU1PVkVELCBjaGlsZFJlbW92ZWQsIHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5wcmVOb2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICBUaXBzTWFuYWdlci5jcmVhdGVUaXBzKGBPbmx5IHN1cHBvcnQgd2hlbiB0aGVyZSBpcyAzIHN0YXJzIGV4aXN0aW5nYCk7XG4gICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZU5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jaGlsZE5vZGUpO1xuICAgICAgICB0aGlzLnByZU5vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLkNISUxEX1JFTU9WRUQsIGNoaWxkUmVtb3ZlZCwgdGhpcyk7XG4gICAgfSxcblxuICAgIHJlb3JkZXJDaGlsZCAoKSB7XG4gICAgICAgIHRoaXMucmVzZXRDaGlsZE5vZGUoKTtcbiAgICAgICAgZnVuY3Rpb24gY2hpbGRSZW9yZGVyZWQgKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy50aXAuc3RyaW5nID0gYFJlb3JkZXJfY2hpbGQgc3VjY2Vzc2RcXG4gekluZGV4IG9yZGVyOiAke3RoaXMuZ2V0Q2hpbGRyZW5Db250ZW50KCl9YDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVOb2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLkNISUxEX1JFT1JERVIsIGNoaWxkUmVvcmRlcmVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wcmVOb2RlLmNoaWxkcmVuWzBdLnpJbmRleCA9IDEwO1xuICAgICAgICB0aGlzLnByZU5vZGUuc29ydEFsbENoaWxkcmVuKCk7XG4gICAgICAgIHRoaXMucHJlTm9kZS5vZmYoY2MuTm9kZS5FdmVudFR5cGUuQ0hJTERfUkVPUkRFUiwgY2hpbGRSZW9yZGVyZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICBjaGFuZ2VHcm91cCAoKSB7XG4gICAgICAgIHRoaXMucmVzZXROb2RlKCk7XG4gICAgICAgIGZ1bmN0aW9uIGdyb3VwQ2hhbmdlZCAobm9kZSkge1xuICAgICAgICAgICAgdGhpcy50aXAuc3RyaW5nID0gYEdyb3VwX2NoYW5nZWQgc3VjY2Vzc2Q6ICR7dGhpcy5iYXNpY05vZGUuZ3JvdXB9YDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLkdST1VQX0NIQU5HRUQsIGdyb3VwQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLmdyb3VwID0gJ0NvbGxpZGVyJztcbiAgICAgICAgdGhpcy5iYXNpY05vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLkdST1VQX0NIQU5HRUQsIGdyb3VwQ2hhbmdlZCwgdGhpcyk7XG4gICAgfSxcblxuICAgIHJlc2V0Tm9kZSAoKSB7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLnggPSAtMjAwO1xuICAgICAgICB0aGlzLmJhc2ljTm9kZS55ID0gNzU7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLnNjYWxlWCA9IDFcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuc2NhbGVZID0gMTtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUud2lkdGggPSAyNTY7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLmhlaWdodCA9IDI1NjtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuYW5jaG9yWCA9IDAuNTtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuYW5jaG9yWSA9IDAuNTtcbiAgICAgICAgdGhpcy5iYXNpY05vZGUuY29sb3IgPSBuZXcgY2MuQ29sb3IoMjU1LCAyNTUsIDI1NSk7XG4gICAgICAgIHRoaXMuYmFzaWNOb2RlLmdyb3VwID0gJ0RlZmF1bHQnO1xuICAgIH0sXG5cbiAgICByZXNldENoaWxkTm9kZSAoKSB7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMucHJlTm9kZS5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGlsZHJlbltpXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcjEnOlxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpXS56SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFyMic6XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ldLnpJbmRleCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXIzJzpcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baV0uekluZGV4ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVOb2RlLnNvcnRBbGxDaGlsZHJlbigpO1xuICAgIH0sXG5cbiAgICBnZXRDaGlsZHJlbkNvbnRlbnQgKCkge1xuICAgICAgICBsZXQgc3RyID0gJyc7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMucHJlTm9kZS5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHRlbXBPYmogPSBjaGlsZHJlblswXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAoY2hpbGQuekluZGV4ID4gdGVtcE9iai56SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0ZW1wT2JqID0gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHIgKz0gYCR7Y2hpbGQubmFtZX0gYDtcbiAgICAgICAgICAgIGNoaWxkLmNvbG9yID0gbmV3IGNjLkNvbG9yKDI1NSwgMjU1LCAyNTUpO1xuICAgICAgICB9XG4gICAgICAgIHRlbXBPYmouY29sb3IgPSBuZXcgY2MuQ29sb3IoMjU1LCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG59KTtcbiJdfQ==