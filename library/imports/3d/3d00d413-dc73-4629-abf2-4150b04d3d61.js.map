{"version":3,"sources":["assets/cases/05_scripting/10_network/downloader-web/downloader-picture.js"],"names":["i18n","require","cc","Class","Component","properties","remindLabel","type","Label","inputUrlBox","EditBox","picNode","Sprite","_picUrl","onLoad","textKey","startLoad","string","assetManager","loadRemote","picLoadComplete","bind","t","err","res","console","log","spriteFrame","SpriteFrame","node","active"],"mappings":";;;;;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEAC,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,WAAW,EAAE;MACT,WAAS,IADA;MAETC,IAAI,EAAEL,EAAE,CAACM;IAFA,CADL;IAKRC,WAAW,EAAE;MACT,WAAS,IADA;MAETF,IAAI,EAAEL,EAAE,CAACQ;IAFA,CALL;IASRC,OAAO,EAAE;MACL,WAAS,IADJ;MAELJ,IAAI,EAAEL,EAAE,CAACU;IAFJ,CATD;IAaRC,OAAO,EAAE;EAbD,CAHP;EAmBLC,MAnBK,oBAmBK;IACN,KAAKR,WAAL,CAAiBS,OAAjB,GAA2B,EAA3B;EACH,CArBI;EAuBLC,SAvBK,uBAuBQ;IACT;IACA,KAAKH,OAAL,GAAe,KAAKJ,WAAL,CAAiBQ,MAAhC,CAFS,CAGT;;IACA,IAAI,KAAKJ,OAAT,EAAkB;MACdX,EAAE,CAACgB,YAAH,CAAgBC,UAAhB,CAA2B,KAAKN,OAAhC,EAAyC,KAAKO,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAzC;MACA,KAAKf,WAAL,CAAiBS,OAAjB,GAA2Bf,IAAI,CAACsB,CAAL,CAAO,mDAAP,CAA3B;IACH,CAHD,MAIK;MACD,KAAKhB,WAAL,CAAiBS,OAAjB,GAA2Bf,IAAI,CAACsB,CAAL,CAAO,oDAAP,CAA3B;IACH;EACJ,CAlCI;EAoCLF,eApCK,2BAoCYG,GApCZ,EAoCiBC,GApCjB,EAoCsB;IACvB,IAAID,GAAG,IAAI,CAACC,GAAZ,EAAiB;MACbC,OAAO,CAACC,GAAR,CAAYH,GAAZ;MACA,KAAKjB,WAAL,CAAiBS,OAAjB,GAA4Bf,IAAI,CAACsB,CAAL,CAAO,qDAAP,CAA5B;MACA;IACH;;IAED,KAAKhB,WAAL,CAAiBS,OAAjB,GAA2Bf,IAAI,CAACsB,CAAL,CAAO,qDAAP,CAA3B;IAEA,IAAIK,WAAW,GAAG,IAAIzB,EAAE,CAAC0B,WAAP,CAAmBJ,GAAnB,CAAlB;IACA,KAAKb,OAAL,CAAagB,WAAb,GAA2BA,WAA3B;IACA,KAAKhB,OAAL,CAAakB,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;EACH;AAhDI,CAAT","sourceRoot":"/","sourcesContent":["const i18n = require('i18n');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        remindLabel: {\n            default: null,\n            type: cc.Label\n        },\n        inputUrlBox: {\n            default: null,\n            type: cc.EditBox\n        },\n        picNode: {\n            default: null,\n            type: cc.Sprite\n        },\n        _picUrl: 'http://tools.itharbors.com/christmas/res/tree.png'\n    },\n\n    onLoad () {\n        this.remindLabel.textKey = '';\n    },\n\n    startLoad () {\n        // set url\n        this._picUrl = this.inputUrlBox.string;\n        // download pic\n        if (this._picUrl) {\n            cc.assetManager.loadRemote(this._picUrl, this.picLoadComplete.bind(this));\n            this.remindLabel.textKey = i18n.t('cases/05_scripting/11_network/download-web.fire.2');\n        }\n        else {\n            this.remindLabel.textKey = i18n.t('cases/05_scripting/11_network/download-web.fire.10');\n        }\n    },\n\n    picLoadComplete (err, res) {\n        if (err || !res) {\n            console.log(err);\n            this.remindLabel.textKey =  i18n.t('cases/05_scripting/11_network/download-web.fire.5.2');\n            return;\n        }\n\n        this.remindLabel.textKey = i18n.t('cases/05_scripting/11_network/download-web.fire.4.2');\n\n        let spriteFrame = new cc.SpriteFrame(res);\n        this.picNode.spriteFrame = spriteFrame;\n        this.picNode.node.active = true;\n    }\n\n});\n"]}