{"version":3,"sources":["assets/cases/asset_bundle/asset-bundle.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\nimport * as i18n from '../../i18n/i18n';\n\n@ccclass\nexport default class AssetBundle extends cc.Component {\n\n    @property(cc.Label)\n    public loadTips: any = null;\n\n    @property(cc.Node)\n    public showWindow: cc.Node = null;\n\n    @property({type: [cc.Label]})\n    public labels: Array<cc.Label> = [];\n\n    private _audioSource: cc.AudioSource = null;\n\n    private _isLoading: Boolean = false;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (testBundle) {\n            this.labels[0].textKey = i18n.t(\"cases/AssetBundle.12\");\n        }\n    }\n\n    onClickBundle () {\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (testBundle || this._isLoading) {\n            return;\n        }\n        this._onClear()\n        this._isLoading = true;\n        this.loadTips.textKey = \"Bundle Loading....\";\n        cc.assetManager.loadBundle('TestBundle', (err) => {\n            if (err) {\n                cc.log('Error url [' + err + ']');\n                return;\n            }\n            this._isLoading = false;\n            this.loadTips.textKey = \"Bundle loaded Successfully!\";\n            this.labels[0].textKey = i18n.t(\"cases/AssetBundle.12\");\n        });\n    }\n\n    onClickTexture () {\n        if (this._isLoading) return;\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (!testBundle) {\n            this.loadTips.textKey = \"cases/AssetBundle.9\";\n            return;\n        }\n        this._onClear()\n        this._isLoading = true;\n        this.loadTips.textKey = \"Texture Loading....\";\n        testBundle.load(\"gold\", (err: Error, asset: cc.Texture2D) => {\n            if (err) {\n                cc.log('Error url [' + err + ']');\n                return;\n            }\n            this._isLoading = false;\n            this.loadTips.textKey = \"\";\n            var node = new cc.Node(\"New Node\");\n            node.setPosition(0, 0);\n            let component = node.addComponent(cc.Sprite);\n            component.spriteFrame = new cc.SpriteFrame(asset);\n            this.labels[1].textKey = i18n.t(\"cases/AssetBundle.12\");\n            this.showWindow.addChild(node);\n        });\n    }\n\n    onClickAudio () {\n        if (this._isLoading) return;\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (!testBundle) {\n            this.loadTips.textKey = \"cases/AssetBundle.9\";\n            return;\n        }\n        this._onClear()\n        this._isLoading = true;\n        this.loadTips.textKey = \"Audio Loading....\";\n        testBundle.load(\"ss\", (err: Error, asset: cc.AudioClip) => {\n            if (err) {\n                cc.log('Error url [' + err + ']');\n                return;\n            }\n            this._isLoading = false;\n            this.loadTips.textKey = \"\";\n            var node = new cc.Node(\"New Node\");\n            node.setPosition(0, 0);\n            let component = node.addComponent(cc.AudioSource);\n            component.clip = asset;\n            component.play();\n            this._audioSource = component;\n            this.loadTips.textKey = \"cases/AssetBundle.15\";\n            this.labels[2].textKey = i18n.t(\"cases/AssetBundle.12\");\n            this.showWindow.addChild(node);\n        });\n    }\n\n    onClickScene () {\n        if (this._isLoading) return;\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (!testBundle) {\n            this.loadTips.textKey = \"cases/AssetBundle.9\";\n            return;\n        }\n        this._onClear()\n        this._isLoading = true;\n        this.loadTips.textKey = \"Scene Loading....\";\n        testBundle.loadScene(\"sub-scene\", (err: Error, asset: cc.SceneAsset) => {\n            if (err) {\n                cc.log('Error url [' + err + ']');\n                return;\n            }\n            this._isLoading = false;\n            this.loadTips.textKey = \"\";\n            cc.director.runScene(asset);\n        });\n    }\n\n    onClickDestroy () {\n        if (this._isLoading) return;\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (!testBundle) {\n            this.loadTips.textKey = \"cases/AssetBundle.9\";\n            return;\n        }\n        this._onClear();\n        cc.assetManager.removeBundle(testBundle);\n        this.loadTips.textKey = \"cases/AssetBundle.17\";\n        this.labels[0].textKey = \"cases/AssetBundle.2\";\n        this.labels[1].textKey = \"cases/AssetBundle.4\";\n        this.labels[2].textKey = \"cases/AssetBundle.3\";\n        this.labels[3].textKey = \"cases/AssetBundle.5\";\n    }\n\n    onClickRelease () {\n        if (this._isLoading) return;\n        var testBundle = cc.assetManager.getBundle('TestBundle');\n        if (!testBundle) {\n            this.loadTips.textKey = \"cases/AssetBundle.9\";\n            return;\n        }\n        this._onClear();\n        testBundle.releaseAll();\n        this.loadTips.textKey = \"cases/AssetBundle.16\";\n        this.labels[1].textKey = \"cases/AssetBundle.4\";\n        this.labels[2].textKey = \"cases/AssetBundle.3\";\n        this.labels[3].textKey = \"cases/AssetBundle.5\";\n    }\n\n    _onClear () {\n        this.showWindow.removeAllChildren(true);\n        if (this._audioSource && this._audioSource instanceof cc.AudioSource) {\n            this._audioSource.stop();\n        }\n    }\n\n    // update (dt) {}\n}"]}