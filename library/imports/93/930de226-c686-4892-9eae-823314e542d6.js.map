{"version":3,"sources":["assets/cases/05_scripting/04_scheduler/scheduleCallbacks.js"],"names":["cc","Class","Component","properties","time","counter","Label","_callback","node","stopAllActions","runAction","seq","repeat","counting","string","toFixed","onLoad","squashAction","scaleTo","stretchAction","scaleBackAction","moveUpAction","moveBy","v2","easing","easeCubicActionOut","moveDownAction","easeCubicActionIn","sequence","update","dt","stopCounting","unscheduleAllCallbacks","repeatSchedule","schedule","oneSchedule","scheduleOnce","cancelSchedules"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    \n    properties: {\n        time: {\n            default: 5\n        },\n\n        counter: cc.Label\n    },\n    \n    _callback: function () {\n        this.node.stopAllActions();\n        this.node.runAction(this.seq);\n        if (this.repeat) {\n            this.counting = true;\n        }\n        else {\n            this.counting = false;\n        }\n        this.time = 5;\n        this.counter.string = this.time.toFixed(2) + ' s';\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var squashAction = cc.scaleTo(0.2, 1, 0.6);\n        var stretchAction = cc.scaleTo(0.2, 1, 1.2);\n        var scaleBackAction = cc.scaleTo(0.1, 1, 1);\n        var moveUpAction = cc.moveBy(1, cc.v2(0, 100)).easing(cc.easeCubicActionOut());\n        var moveDownAction = cc.moveBy(1, cc.v2(0, -100)).easing(cc.easeCubicActionIn());\n        this.seq = cc.sequence(squashAction,\n                               stretchAction,\n                               moveUpAction,\n                               scaleBackAction,\n                               moveDownAction,\n                               squashAction,\n                               scaleBackAction);\n                               \n        this.counter.string = this.time.toFixed(2) + ' s';\n        this.counting = false;\n        this.repeat = false;\n    },\n\n    // called every frame\n    update: function (dt) {\n        if (this.counting) {\n            this.time -= dt;\n            this.counter.string = this.time.toFixed(2) + ' s';\n        }\n    },\n    \n    stopCounting: function () {\n        this.unscheduleAllCallbacks();\n        this.counting = false;\n        this.time = 5;\n        this.counter.string = this.time.toFixed(2) + ' s';\n    },\n    \n    repeatSchedule: function () {\n        this.stopCounting();\n        this.schedule(this._callback, 5);\n        this.repeat = true;\n        this.counting = true;\n    },\n    \n    oneSchedule: function () {\n        this.stopCounting();\n        this.scheduleOnce(this._callback, 5);\n        this.repeat = false;\n        this.counting = true;\n    },\n    \n    cancelSchedules: function () {\n        this.repeat = false;\n        this.stopCounting();\n    }\n});\n"]}