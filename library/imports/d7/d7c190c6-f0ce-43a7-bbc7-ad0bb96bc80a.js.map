{"version":3,"sources":["assets/cases/05_scripting/06_asset_loading/LoadRes/LoadRes_example.js"],"names":["cc","Class","Component","properties","content","Node","_url","_assets","onLoad","loadSpriteFrame","url","_removeAllChildren","resources","load","SpriteAtlas","err","atlas","push","addRef","node","addChild","position","v2","sprite","addComponent","Sprite","spriteFrame","getSpriteFrame","loadPrefab","Prefab","prefab","instantiate","onDisable","forEach","x","decRef","removeAllChildren"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,OAAO,EAAEJ,EAAE,CAACK,IADJ;IAERC,IAAI,EAAC,EAFG;IAGRC,OAAO,EAAE;EAHD,CAHP;EASLC,MAAM,EAAE,kBAAY;IAChB,KAAKF,IAAL,GAAY,CAAC,mBAAD,EAAsB,oBAAtB,CAAZ;EACH,CAXI;EAaLG,eAAe,EAAE,2BAAY;IAAA;;IACzB,IAAIC,GAAG,GAAG,KAAKJ,IAAL,CAAU,CAAV,CAAV;;IACA,KAAKK,kBAAL;;IACAX,EAAE,CAACY,SAAH,CAAaC,IAAb,CAAkBH,GAAlB,EAAuBV,EAAE,CAACc,WAA1B,EAAuC,UAACC,GAAD,EAAMC,KAAN,EAAgB;MACnD,KAAI,CAACT,OAAL,CAAaU,IAAb,CAAkBD,KAAK,CAACE,MAAN,EAAlB;;MACA,KAAI,CAACP,kBAAL;;MACA,IAAIQ,IAAI,GAAG,IAAInB,EAAE,CAACK,IAAP,EAAX;;MACA,KAAI,CAACD,OAAL,CAAagB,QAAb,CAAsBD,IAAtB;;MACAA,IAAI,CAACE,QAAL,GAAgBrB,EAAE,CAACsB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhB;MACA,IAAIC,MAAM,GAAGJ,IAAI,CAACK,YAAL,CAAkBxB,EAAE,CAACyB,MAArB,CAAb;MACAF,MAAM,CAACG,WAAP,GAAqBV,KAAK,CAACW,cAAN,CAAqB,aAArB,CAArB;IACH,CARD;EASH,CAzBI;EA2BLC,UAAU,EAAE,sBAAY;IAAA;;IACpB,IAAIlB,GAAG,GAAG,KAAKJ,IAAL,CAAU,CAAV,CAAV;;IACA,KAAKK,kBAAL;;IACAX,EAAE,CAACY,SAAH,CAAaC,IAAb,CAAkBH,GAAlB,EAAuBV,EAAE,CAAC6B,MAA1B,EAAkC,UAACd,GAAD,EAAMe,MAAN,EAAiB;MAC/C,MAAI,CAACvB,OAAL,CAAaU,IAAb,CAAkBa,MAAM,CAACZ,MAAP,EAAlB;;MACA,MAAI,CAACP,kBAAL;;MACA,IAAIQ,IAAI,GAAGnB,EAAE,CAAC+B,WAAH,CAAeD,MAAf,CAAX;;MACA,MAAI,CAAC1B,OAAL,CAAagB,QAAb,CAAsBD,IAAtB;;MACAA,IAAI,CAACE,QAAL,GAAgBrB,EAAE,CAACsB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhB;IACH,CAND;EAOH,CArCI;EAuCLU,SAvCK,uBAuCQ;IACT,KAAKzB,OAAL,CAAa0B,OAAb,CAAqB,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACC,MAAF,EAAJ;IAAA,CAAtB;;IACA,KAAK5B,OAAL,GAAe,IAAf;EACH,CA1CI;EA4CLI,kBAAkB,EAAE,8BAAY;IAC5B,KAAKP,OAAL,CAAagC,iBAAb,CAA+B,IAA/B;EACH;AA9CI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        content: cc.Node,\n        _url:[],\n        _assets: [],\n    },\n\n    onLoad: function () {\n        this._url = [\"test_assets/atlas\", \"test_assets/prefab\"];\n    },\n\n    loadSpriteFrame: function () {\n        var url = this._url[0];\n        this._removeAllChildren();\n        cc.resources.load(url, cc.SpriteAtlas, (err, atlas) => {\n            this._assets.push(atlas.addRef());\n            this._removeAllChildren();\n            var node = new cc.Node();\n            this.content.addChild(node);\n            node.position = cc.v2(0, 0);\n            var sprite = node.addComponent(cc.Sprite);\n            sprite.spriteFrame = atlas.getSpriteFrame('sheep_run_0');\n        });\n    },\n\n    loadPrefab: function () {\n        var url = this._url[1];\n        this._removeAllChildren();\n        cc.resources.load(url, cc.Prefab, (err, prefab) => {\n            this._assets.push(prefab.addRef());\n            this._removeAllChildren();\n            var node = cc.instantiate(prefab);\n            this.content.addChild(node);\n            node.position = cc.v2(0, 0);\n        });\n    },\n\n    onDisable () {\n        this._assets.forEach(x => x.decRef());\n        this._assets = null;\n    },\n\n    _removeAllChildren: function () {\n        this.content.removeAllChildren(true);\n    }\n});\n"]}