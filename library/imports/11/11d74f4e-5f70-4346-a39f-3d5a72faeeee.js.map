{"version":3,"sources":["assets/cases/tiledmap/ShieldNode.js"],"names":["cc","Class","Component","properties","tiledLayer","type","TiledLayer","onLoad","resources","load","err","prefab","error","initScene","bind","posArr","v2","i","shieldNode","instantiate","x","y","addUserNode","on","Node","EventType","TOUCH_MOVE","event","deltaMove","getLocation","sub","getPreviousLocation","length"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,UAAU,EAAE;MACRC,IAAI,EAAEL,EAAE,CAACM,UADD;MAER,WAAS;IAFD;EADJ,CAHP;EAULC,MAVK,oBAUK;IACNP,EAAE,CAACQ,SAAH,CAAaC,IAAb,CAAkB,oBAAlB,EAAwC,UAAUC,GAAV,EAAeC,MAAf,EAAuB;MAC3D,IAAID,GAAJ,EAAS;QACLV,EAAE,CAACY,KAAH,CAAS,0CAAT;QACA;MACH;;MACD,KAAKC,SAAL,CAAeF,MAAf;IACH,CANuC,CAMtCG,IANsC,CAMjC,IANiC,CAAxC;EAOH,CAlBI;EAoBLD,SApBK,qBAoBMF,MApBN,EAoBc;IAAA;;IACf,IAAII,MAAM,GAAG,CAACf,EAAE,CAACgB,EAAH,CAAM,CAAC,GAAP,EAAY,EAAZ,CAAD,EAAkBhB,EAAE,CAACgB,EAAH,CAAM,CAAC,GAAP,EAAY,EAAZ,CAAlB,EAAmChB,EAAE,CAACgB,EAAH,CAAM,CAAC,EAAP,EAAW,EAAX,CAAnC,EAAmDhB,EAAE,CAACgB,EAAH,CAAM,CAAC,GAAP,EAAY,CAAC,GAAb,CAAnD,EAAsEhB,EAAE,CAACgB,EAAH,CAAM,CAAC,EAAP,EAAW,CAAC,EAAZ,CAAtE,CAAb;;IADe,2BAENC,CAFM;MAGX,IAAIC,UAAU,GAAGlB,EAAE,CAACmB,WAAH,CAAeR,MAAf,CAAjB;MACAO,UAAU,CAACE,CAAX,GAAeL,MAAM,CAACE,CAAD,CAAN,CAAUG,CAAzB;MACAF,UAAU,CAACG,CAAX,GAAeN,MAAM,CAACE,CAAD,CAAN,CAAUI,CAAzB;;MACA,KAAI,CAACjB,UAAL,CAAgBkB,WAAhB,CAA4BJ,UAA5B;;MACAA,UAAU,CAACK,EAAX,CAAcvB,EAAE,CAACwB,IAAH,CAAQC,SAAR,CAAkBC,UAAhC,EAA4C,UAAUC,KAAV,EAAiB;QACzD,IAAIC,SAAS,GAAGD,KAAK,CAACE,WAAN,GAAoBC,GAApB,CAAwBH,KAAK,CAACI,mBAAN,EAAxB,CAAhB;QACAb,UAAU,CAACE,CAAX,IAAgBQ,SAAS,CAACR,CAA1B;QACAF,UAAU,CAACG,CAAX,IAAgBO,SAAS,CAACP,CAA1B;MACH,CAJD;IAPW;;IAEf,KAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAAM,CAACiB,MAA3B,EAAmCf,CAAC,EAApC,EAAwC;MAAA,MAA/BA,CAA+B;IAUvC;EACJ;AAjCI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tiledLayer: {\n            type: cc.TiledLayer,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        cc.resources.load(\"tilemap/shieldNode\", function (err, prefab) {\n            if (err) {\n                cc.error(\"tilemap/shieldNode resources load failed\");\n                return;\n            }\n            this.initScene(prefab);\n        }.bind(this));\n    },\n\n    initScene (prefab) {\n        let posArr = [cc.v2(-249, 96), cc.v2(-150, 76), cc.v2(-60, 54), cc.v2(-248, -144), cc.v2(-89, -34)];\n        for (let i = 0; i < posArr.length; i++) {\n            let shieldNode = cc.instantiate(prefab);\n            shieldNode.x = posArr[i].x;\n            shieldNode.y = posArr[i].y;\n            this.tiledLayer.addUserNode(shieldNode);\n            shieldNode.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n                let deltaMove = event.getLocation().sub(event.getPreviousLocation());\n                shieldNode.x += deltaMove.x;\n                shieldNode.y += deltaMove.y;\n            });    \n        }\n    },\n});\n"]}