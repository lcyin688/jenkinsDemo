{"version":3,"sources":["assets/cases/05_scripting/03_events/MouseDragger.js"],"names":["TouchDragger","cc","Class","Component","properties","propagate","onLoad","_down","node","opacity","on","Node","EventType","MOUSE_DOWN","event","log","stopPropagation","MOUSE_MOVE","delta","getDelta","x","y","MOUSE_LEAVE","MOUSE_UP"],"mappings":";;;;;;AAAA,IAAIA,YAAY,GAAGC,EAAE,CAACC,KAAH,CAAS;EACxB,WAASD,EAAE,CAACE,SADY;EAGxBC,UAAU,EAAE;IACRC,SAAS,EAAE;MACP,WAAS;IADF,CADH,CAIR;;EAJQ,CAHY;EAUxB;EACAC,MAAM,EAAE,kBAAY;IAChB,KAAKC,KAAL,GAAa,KAAb;IACA,KAAKC,IAAL,CAAUC,OAAV,GAAoB,GAApB;IACA,KAAKD,IAAL,CAAUE,EAAV,CAAaT,EAAE,CAACU,IAAH,CAAQC,SAAR,CAAkBC,UAA/B,EAA2C,UAAUC,KAAV,EAAiB;MACxDb,EAAE,CAACc,GAAH,CAAO,iBAAP;MACA,KAAKP,IAAL,CAAUC,OAAV,GAAoB,GAApB;MACA,KAAKF,KAAL,GAAa,IAAb;MACA,IAAI,CAAC,KAAKF,SAAV,EACIS,KAAK,CAACE,eAAN;IACP,CAND,EAMG,IANH;IAOA,KAAKR,IAAL,CAAUE,EAAV,CAAaT,EAAE,CAACU,IAAH,CAAQC,SAAR,CAAkBK,UAA/B,EAA2C,UAAUH,KAAV,EAAiB;MACxD,IAAI,CAAC,KAAKP,KAAV,EAAiB;QACbO,KAAK,CAACE,eAAN;QACA;MACH;;MACD,KAAKR,IAAL,CAAUC,OAAV,GAAoB,GAApB;MACA,IAAIS,KAAK,GAAGJ,KAAK,CAACK,QAAN,EAAZ;MACA,KAAKX,IAAL,CAAUY,CAAV,IAAeF,KAAK,CAACE,CAArB;MACA,KAAKZ,IAAL,CAAUa,CAAV,IAAeH,KAAK,CAACG,CAArB;MACA,IAAI,CAAC,KAAKhB,SAAV,EACIS,KAAK,CAACE,eAAN;IACP,CAXD,EAWG,IAXH;IAYA,KAAKR,IAAL,CAAUE,EAAV,CAAaT,EAAE,CAACU,IAAH,CAAQC,SAAR,CAAkBU,WAA/B,EAA4C,UAAUR,KAAV,EAAiB;MACzD,IAAI,CAAC,KAAKP,KAAV,EAAiB;QACbO,KAAK,CAACE,eAAN;QACA;MACH;;MACD,KAAKR,IAAL,CAAUC,OAAV,GAAoB,GAApB;MACAR,EAAE,CAACc,GAAH,CAAO,gBAAP;MACA,KAAKR,KAAL,GAAa,KAAb;IACH,CARD,EAQG,IARH;IASA,KAAKC,IAAL,CAAUE,EAAV,CAAaT,EAAE,CAACU,IAAH,CAAQC,SAAR,CAAkBW,QAA/B,EAAyC,UAAUT,KAAV,EAAiB;MACtD,IAAI,CAAC,KAAKP,KAAV,EAAiB;QACbO,KAAK,CAACE,eAAN;QACA;MACH;;MACDf,EAAE,CAACc,GAAH,CAAO,eAAP;MACA,KAAKP,IAAL,CAAUC,OAAV,GAAoB,GAApB;MACA,KAAKF,KAAL,GAAa,KAAb;IACH,CARD,EAQG,IARH;EASH;AAnDuB,CAAT,CAAnB","sourceRoot":"/","sourcesContent":["var TouchDragger = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        propagate: {\n            default: false\n        },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._down = false;\n        this.node.opacity = 160;\n        this.node.on(cc.Node.EventType.MOUSE_DOWN, function (event) {\n            cc.log('Drag stated ...');\n            this.node.opacity = 255;\n            this._down = true;\n            if (!this.propagate)\n                event.stopPropagation();\n        }, this);\n        this.node.on(cc.Node.EventType.MOUSE_MOVE, function (event) {\n            if (!this._down) {\n                event.stopPropagation();\n                return\n            }\n            this.node.opacity = 255;\n            var delta = event.getDelta();\n            this.node.x += delta.x;\n            this.node.y += delta.y;\n            if (!this.propagate)\n                event.stopPropagation();\n        }, this);\n        this.node.on(cc.Node.EventType.MOUSE_LEAVE, function (event) {\n            if (!this._down) {\n                event.stopPropagation();\n                return\n            }\n            this.node.opacity = 160;\n            cc.log('Drag leave ...');\n            this._down = false;\n        }, this);\n        this.node.on(cc.Node.EventType.MOUSE_UP, function (event) {\n            if (!this._down) {\n                event.stopPropagation();\n                return\n            }\n            cc.log('Drag done ...');\n            this.node.opacity = 160;\n            this._down = false;\n        }, this);\n    },\n});"]}